import{v as o,W as e,K as a,r as t,o as s,c as i,w as n,i as r,b as m,h as l,j as u,k as p,R as c}from"./index-CSaaSGkr.js";import{_ as d}from"./uni-match-media.CHcPLLWk.js";import{r as f}from"./uni-app.es.Csk3S8NK.js";import{_ as h}from"./uni-easyinput.BXwJBmD-.js";import{_ as b}from"./uni-id-pages-sms-form.BedY38UF.js";import{_ as D}from"./uni-popup-captcha.B_YjF6rv.js";import{m as _}from"./store.aJibO4ZC.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.DZvpz1YP.js";import"./uni-captcha.Bxp0nv4s.js";import"./uni-popup.C0-y-zeJ.js";const j=g({data:()=>({formData:{mobile:"",code:"",captcha:""},focusMobile:!0,logo:"/static/logo.png"}),computed:{tipText(){return`验证码已通过短信发送至 ${this.formData.mobile}。密码为6 - 20位`}},onLoad(o){},onReady(){},methods:{submit(){if(!/^1\d{10}$/.test(this.formData.mobile))return this.focusMobile=!0,o({title:"手机号码格式不正确",icon:"none",duration:3e3});if(!/^\d{6}$/.test(this.formData.code))return this.$refs.smsForm.focusSmsCodeInput=!0,o({title:"验证码格式不正确",icon:"none",duration:3e3});e.importObject("uni-id-co").bindMobileBySms(this.formData).then((e=>{o({title:e.errMsg,icon:"none",duration:3e3}),this.getOpenerEventChannel(),_.setUserInfo(this.formData),a()})).catch((o=>{console.log(o),"uni-id-captcha-required"==o.errCode&&this.$refs.popup.open()})).finally((o=>{this.formData.captcha=""}))}}},[["render",function(o,e,a,_,g,j){const y=u,V=r,x=p,C=f(t("uni-match-media"),d),M=f(t("uni-easyinput"),h),v=f(t("uni-id-pages-sms-form"),b),$=c,B=f(t("uni-popup-captcha"),D);return s(),i(V,{class:"uni-content"},{default:n((()=>[m(C,{"min-width":690},{default:n((()=>[m(V,{class:"login-logo"},{default:n((()=>[m(y,{src:g.logo},null,8,["src"])])),_:1}),m(x,{class:"title title-box"},{default:n((()=>[l("绑定手机号")])),_:1})])),_:1}),m(M,{clearable:"",focus:g.focusMobile,onBlur:e[0]||(e[0]=o=>g.focusMobile=!1),type:"number",class:"input-box",inputBorder:!1,modelValue:g.formData.mobile,"onUpdate:modelValue":e[1]||(e[1]=o=>g.formData.mobile=o),maxlength:"11",placeholder:"请输入手机号"},null,8,["focus","modelValue"]),m(v,{ref:"smsForm",type:"bind-mobile-by-sms",modelValue:g.formData.code,"onUpdate:modelValue":e[2]||(e[2]=o=>g.formData.code=o),phone:g.formData.mobile},null,8,["modelValue","phone"]),m($,{class:"uni-btn send-btn-box",type:"primary",onClick:j.submit},{default:n((()=>[l("提交")])),_:1},8,["onClick"]),m(B,{onConfirm:j.submit,modelValue:g.formData.captcha,"onUpdate:modelValue":e[3]||(e[3]=o=>g.formData.captcha=o),scene:"bind-mobile-by-sms",ref:"popup"},null,8,["onConfirm","modelValue"])])),_:1})}],["__scopeId","data-v-8ad2d767"]]);export{j as default};
