"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var ts=Object.create;var Ye=Object.defineProperty,ns=Object.defineProperties,ss=Object.getOwnPropertyDescriptor,os=Object.getOwnPropertyDescriptors,is=Object.getOwnPropertyNames,Dt=Object.getOwnPropertySymbols,rs=Object.getPrototypeOf,Lt=Object.prototype.hasOwnProperty,as=Object.prototype.propertyIsEnumerable;var Ot=(t,e,n)=>e in t?Ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||(e={}))Lt.call(e,n)&&Ot(t,n,e[n]);if(Dt)for(var n of Dt(e))as.call(e,n)&&Ot(t,n,e[n]);return t},j=(t,e)=>ns(t,os(e));var cs=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ls=(t,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of is(e))!Lt.call(t,o)&&o!==n&&Ye(t,o,{get:()=>e[o],enumerable:!(s=ss(e,o))||s.enumerable});return t};var Rt=(t,e,n)=>(n=t!=null?ts(rs(t)):{},ls(e||!t||!t.__esModule?Ye(n,"default",{value:t,enumerable:!0}):n,t));var P=(t,e,n)=>new Promise((s,o)=>{var i=u=>{try{c(n.next(u))}catch(l){o(l)}},a=u=>{try{c(n.throw(u))}catch(l){o(l)}},c=u=>u.done?s(u.value):Promise.resolve(u.value).then(i,a);c((n=n.apply(t,e)).next())});var Ge=cs((wr,Et)=>{Et.exports=Vue});var Y=Rt(Ge());var E=(t,e)=>{let n=t.__vccOpts||t;for(let[s,o]of e)n[s]=o;return n};function kt(t){return weex.requireModule(t)}function xt(t,e,...n){uni.__log__?uni.__log__(t,e,...n):console[t].apply(console,[...n,e])}function N(t,e){return typeof t=="string"?e:t}var us=[{path:"pages/list/list",style:{navigationStyle:"custom"}},{path:"pages/grid/grid",style:{navigationStyle:"custom"}},{path:"pages/list/search/search",style:{navigationBarTitleText:"\u641C\u7D22"}},{path:"pages/list/detail",style:{"app-plus":{titleNView:{buttons:[{type:"share"}],type:"transparent"}},h5:{titleNView:{type:"transparent"}},navigationBarTitleText:"\u6587\u7AE0\u8BE6\u60C5"}},{path:"pages/ucenter/ucenter",style:{navigationStyle:"custom"}},{path:"pages/uni-agree/uni-agree",style:{navigationStyle:"custom","app-plus":{popGesture:"none"}}},{path:"pages/ucenter/settings/settings",style:{navigationBarTitleText:"\u8BBE\u7F6E"}},{path:"pages/ucenter/read-news-log/read-news-log",style:{navigationBarTitleText:"\u9605\u8BFB\u8BB0\u5F55",enablePullDownRefresh:!0}},{path:"pages/ucenter/about/about",style:{navigationBarTitleText:"\u5173\u4E8E","app-plus":{titleNView:{buttons:[{type:"share"}]}}}},{path:"uni_modules/uni-upgrade-center-app/pages/upgrade-popup",style:{disableScroll:!0,"app-plus":{backgroundColorTop:"transparent",background:"transparent",titleNView:!1,scrollIndicator:!1,popGesture:"none",animationType:"fade-in",animationDuration:200}}},{path:"pages/ucenter/invite/invite",style:{navigationStyle:"custom",enablePullDownRefresh:!1}},{path:"components/icon/index/index",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"components/modal/index/index",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/list/form/form",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"components/icon/icon",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"components/calculator/calculator",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/login/login/login",style:{navigationBarTitleText:""}}],ds=[{root:"uni_modules/uni-feedback",pages:[{path:"pages/opendb-feedback/opendb-feedback",style:{navigationBarTitleText:"\u610F\u89C1\u53CD\u9988",enablePullDownRefresh:!1}}]},{root:"uni_modules/uni-id-pages/pages",pages:[{path:"userinfo/userinfo",style:{navigationBarTitleText:"\u4E2A\u4EBA\u8D44\u6599"}},{path:"userinfo/realname-verify/realname-verify",style:{enablePullDownRefresh:!1,navigationBarTitleText:"\u5B9E\u540D\u8BA4\u8BC1"}},{path:"login/login-withoutpwd"},{path:"login/login-withpwd"},{path:"userinfo/deactivate/deactivate",style:{navigationBarTitleText:"\u6CE8\u9500\u8D26\u53F7"}},{path:"userinfo/bind-mobile/bind-mobile",style:{navigationBarTitleText:"\u7ED1\u5B9A\u624B\u673A\u53F7\u7801"}},{path:"login/login-smscode",style:{navigationBarTitleText:"\u624B\u673A\u9A8C\u8BC1\u7801\u767B\u5F55"}},{path:"register/register",style:{navigationBarTitleText:"\u6CE8\u518C"}},{path:"retrieve/retrieve",style:{navigationBarTitleText:"\u91CD\u7F6E\u5BC6\u7801"}},{path:"common/webview/webview",style:{enablePullDownRefresh:!1,navigationBarTitleText:""}},{path:"userinfo/change_pwd/change_pwd",style:{enablePullDownRefresh:!1,navigationBarTitleText:"\u4FEE\u6539\u5BC6\u7801"}},{path:"register/register-by-email",style:{navigationBarTitleText:"\u90AE\u7BB1\u9A8C\u8BC1\u7801\u6CE8\u518C"}},{path:"retrieve/retrieve-by-email",style:{navigationBarTitleText:"\u901A\u8FC7\u90AE\u7BB1\u91CD\u7F6E\u5BC6\u7801"}},{path:"userinfo/set-pwd/set-pwd",style:{enablePullDownRefresh:!1,navigationBarTitleText:"\u8BBE\u7F6E\u5BC6\u7801"}}]}],hs={navigationBarTextStyle:"black",navigationBarTitleText:"uni-starter",navigationBarBackgroundColor:"#FFFFFF",backgroundColor:"#F8F8F8",enablePullDownRefresh:!1,rpxCalcMaxDeviceWidth:375,rpxCalcBaseDeviceWidth:375},fs={list:[{path:"pages/list/detail"},{path:"pages/list/list"},{path:"pages/ucenter/settings/settings"}],current:1},ps={color:"#7A7E83",selectedColor:"#007AFF",borderStyle:"black",backgroundColor:"#FFFFFF",list:[{pagePath:"pages/list/list",iconPath:"static/tabbar/list.png",selectedIconPath:"static/tabbar/list_active.png",text:"\u5217\u8868"},{pagePath:"pages/ucenter/ucenter",iconPath:"static/tabbar/me.png",selectedIconPath:"static/tabbar/me_active.png",text:"\u6211\u7684"}]},gs={loginPage:"uni_modules/uni-id-pages/pages/login/login-withpwd",needLogin:["/uni_modules/uni-id-pages/pages/userinfo/userinfo"],resToLogin:!0},dn={pages:us,subPackages:ds,globalStyle:hs,condition:fs,tabBar:ps,uniIdRouter:gs},ms=[];function ys(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Z(t,e,n){return t(n={path:e,exports:{},require:function(s,o){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(o==null&&n.path)}},n.exports),n.exports}var _s=Z(function(t,e){var n;t.exports=(n=n||function(s,o){var i=Object.create||function(){function d(){}return function(f){var w;return d.prototype=f,w=new d,d.prototype=null,w}}(),a={},c=a.lib={},u=c.Base={extend:function(d){var f=i(this);return d&&f.mixIn(d),f.hasOwnProperty("init")&&this.init!==f.init||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var f in d)d.hasOwnProperty(f)&&(this[f]=d[f]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}},l=c.WordArray=u.extend({init:function(d,f){d=this.words=d||[],this.sigBytes=f!=o?f:4*d.length},toString:function(d){return(d||p).stringify(this)},concat:function(d){var f=this.words,w=d.words,m=this.sigBytes,b=d.sigBytes;if(this.clamp(),m%4)for(var k=0;k<b;k++){var I=w[k>>>2]>>>24-k%4*8&255;f[m+k>>>2]|=I<<24-(m+k)%4*8}else for(k=0;k<b;k+=4)f[m+k>>>2]=w[k>>>2];return this.sigBytes+=b,this},clamp:function(){var d=this.words,f=this.sigBytes;d[f>>>2]&=4294967295<<32-f%4*8,d.length=s.ceil(f/4)},clone:function(){var d=u.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var f,w=[],m=function(I){I=I;var O=987654321,D=4294967295;return function(){var R=((O=36969*(65535&O)+(O>>16)&D)<<16)+(I=18e3*(65535&I)+(I>>16)&D)&D;return R/=4294967296,(R+=.5)*(s.random()>.5?1:-1)}},b=0;b<d;b+=4){var k=m(4294967296*(f||s.random()));f=987654071*k(),w.push(4294967296*k()|0)}return new l.init(w,d)}}),g=a.enc={},p=g.Hex={stringify:function(d){for(var f=d.words,w=d.sigBytes,m=[],b=0;b<w;b++){var k=f[b>>>2]>>>24-b%4*8&255;m.push((k>>>4).toString(16)),m.push((15&k).toString(16))}return m.join("")},parse:function(d){for(var f=d.length,w=[],m=0;m<f;m+=2)w[m>>>3]|=parseInt(d.substr(m,2),16)<<24-m%8*4;return new l.init(w,f/2)}},v=g.Latin1={stringify:function(d){for(var f=d.words,w=d.sigBytes,m=[],b=0;b<w;b++){var k=f[b>>>2]>>>24-b%4*8&255;m.push(String.fromCharCode(k))}return m.join("")},parse:function(d){for(var f=d.length,w=[],m=0;m<f;m++)w[m>>>2]|=(255&d.charCodeAt(m))<<24-m%4*8;return new l.init(w,f)}},y=g.Utf8={stringify:function(d){try{return decodeURIComponent(escape(v.stringify(d)))}catch(f){throw new Error("Malformed UTF-8 data")}},parse:function(d){return v.parse(unescape(encodeURIComponent(d)))}},_=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=y.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var f=this._data,w=f.words,m=f.sigBytes,b=this.blockSize,k=m/(4*b),I=(k=d?s.ceil(k):s.max((0|k)-this._minBufferSize,0))*b,O=s.min(4*I,m);if(I){for(var D=0;D<I;D+=b)this._doProcessBlock(w,D);var R=w.splice(0,I);f.sigBytes-=O}return new l.init(R,O)},clone:function(){var d=u.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0});c.Hasher=_.extend({cfg:u.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){return d&&this._append(d),this._doFinalize()},blockSize:16,_createHelper:function(d){return function(f,w){return new d.init(w).finalize(f)}},_createHmacHelper:function(d){return function(f,w){return new h.HMAC.init(d,w).finalize(f)}}});var h=a.algo={};return a}(Math),n)}),se=_s,ws=(Z(function(t,e){var n;t.exports=(n=se,function(s){var o=n,i=o.lib,a=i.WordArray,c=i.Hasher,u=o.algo,l=[];(function(){for(var h=0;h<64;h++)l[h]=4294967296*s.abs(s.sin(h+1))|0})();var g=u.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(h,d){for(var f=0;f<16;f++){var w=d+f,m=h[w];h[w]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8)}var b=this._hash.words,k=h[d+0],I=h[d+1],O=h[d+2],D=h[d+3],R=h[d+4],H=h[d+5],F=h[d+6],G=h[d+7],B=h[d+8],ee=h[d+9],K=h[d+10],re=h[d+11],me=h[d+12],Pe=h[d+13],De=h[d+14],Oe=h[d+15],x=b[0],C=b[1],T=b[2],S=b[3];x=p(x,C,T,S,k,7,l[0]),S=p(S,x,C,T,I,12,l[1]),T=p(T,S,x,C,O,17,l[2]),C=p(C,T,S,x,D,22,l[3]),x=p(x,C,T,S,R,7,l[4]),S=p(S,x,C,T,H,12,l[5]),T=p(T,S,x,C,F,17,l[6]),C=p(C,T,S,x,G,22,l[7]),x=p(x,C,T,S,B,7,l[8]),S=p(S,x,C,T,ee,12,l[9]),T=p(T,S,x,C,K,17,l[10]),C=p(C,T,S,x,re,22,l[11]),x=p(x,C,T,S,me,7,l[12]),S=p(S,x,C,T,Pe,12,l[13]),T=p(T,S,x,C,De,17,l[14]),x=v(x,C=p(C,T,S,x,Oe,22,l[15]),T,S,I,5,l[16]),S=v(S,x,C,T,F,9,l[17]),T=v(T,S,x,C,re,14,l[18]),C=v(C,T,S,x,k,20,l[19]),x=v(x,C,T,S,H,5,l[20]),S=v(S,x,C,T,K,9,l[21]),T=v(T,S,x,C,Oe,14,l[22]),C=v(C,T,S,x,R,20,l[23]),x=v(x,C,T,S,ee,5,l[24]),S=v(S,x,C,T,De,9,l[25]),T=v(T,S,x,C,D,14,l[26]),C=v(C,T,S,x,B,20,l[27]),x=v(x,C,T,S,Pe,5,l[28]),S=v(S,x,C,T,O,9,l[29]),T=v(T,S,x,C,G,14,l[30]),x=y(x,C=v(C,T,S,x,me,20,l[31]),T,S,H,4,l[32]),S=y(S,x,C,T,B,11,l[33]),T=y(T,S,x,C,re,16,l[34]),C=y(C,T,S,x,De,23,l[35]),x=y(x,C,T,S,I,4,l[36]),S=y(S,x,C,T,R,11,l[37]),T=y(T,S,x,C,G,16,l[38]),C=y(C,T,S,x,K,23,l[39]),x=y(x,C,T,S,Pe,4,l[40]),S=y(S,x,C,T,k,11,l[41]),T=y(T,S,x,C,D,16,l[42]),C=y(C,T,S,x,F,23,l[43]),x=y(x,C,T,S,ee,4,l[44]),S=y(S,x,C,T,me,11,l[45]),T=y(T,S,x,C,Oe,16,l[46]),x=_(x,C=y(C,T,S,x,O,23,l[47]),T,S,k,6,l[48]),S=_(S,x,C,T,G,10,l[49]),T=_(T,S,x,C,De,15,l[50]),C=_(C,T,S,x,H,21,l[51]),x=_(x,C,T,S,me,6,l[52]),S=_(S,x,C,T,D,10,l[53]),T=_(T,S,x,C,K,15,l[54]),C=_(C,T,S,x,I,21,l[55]),x=_(x,C,T,S,B,6,l[56]),S=_(S,x,C,T,Oe,10,l[57]),T=_(T,S,x,C,F,15,l[58]),C=_(C,T,S,x,Pe,21,l[59]),x=_(x,C,T,S,R,6,l[60]),S=_(S,x,C,T,re,10,l[61]),T=_(T,S,x,C,O,15,l[62]),C=_(C,T,S,x,ee,21,l[63]),b[0]=b[0]+x|0,b[1]=b[1]+C|0,b[2]=b[2]+T|0,b[3]=b[3]+S|0},_doFinalize:function(){var h=this._data,d=h.words,f=8*this._nDataBytes,w=8*h.sigBytes;d[w>>>5]|=128<<24-w%32;var m=s.floor(f/4294967296),b=f;d[15+(w+64>>>9<<4)]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),d[14+(w+64>>>9<<4)]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),h.sigBytes=4*(d.length+1),this._process();for(var k=this._hash,I=k.words,O=0;O<4;O++){var D=I[O];I[O]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8)}return k},clone:function(){var h=c.clone.call(this);return h._hash=this._hash.clone(),h}});function p(h,d,f,w,m,b,k){var I=h+(d&f|~d&w)+m+k;return(I<<b|I>>>32-b)+d}function v(h,d,f,w,m,b,k){var I=h+(d&w|f&~w)+m+k;return(I<<b|I>>>32-b)+d}function y(h,d,f,w,m,b,k){var I=h+(d^f^w)+m+k;return(I<<b|I>>>32-b)+d}function _(h,d,f,w,m,b,k){var I=h+(f^(d|~w))+m+k;return(I<<b|I>>>32-b)+d}o.MD5=c._createHelper(g),o.HmacMD5=c._createHmacHelper(g)}(Math),n.MD5)}),Z(function(t,e){var n;t.exports=(n=se,void function(){var s=n,o=s.lib.Base,i=s.enc.Utf8;s.algo.HMAC=o.extend({init:function(a,c){a=this._hasher=new a.init,typeof c=="string"&&(c=i.parse(c));var u=a.blockSize,l=4*u;c.sigBytes>l&&(c=a.finalize(c)),c.clamp();for(var g=this._oKey=c.clone(),p=this._iKey=c.clone(),v=g.words,y=p.words,_=0;_<u;_++)v[_]^=1549556828,y[_]^=909522486;g.sigBytes=p.sigBytes=l,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var c=this._hasher,u=c.finalize(a);return c.reset(),c.finalize(this._oKey.clone().concat(u))}})}())}),Z(function(t,e){t.exports=se.HmacMD5})),bs=Z(function(t,e){t.exports=se.enc.Utf8}),vs=Z(function(t,e){var n;t.exports=(n=se,function(){var s=n,o=s.lib.WordArray;function i(a,c,u){for(var l=[],g=0,p=0;p<c;p++)if(p%4){var v=u[a.charCodeAt(p-1)]<<p%4*2,y=u[a.charCodeAt(p)]>>>6-p%4*2;l[g>>>2]|=(v|y)<<24-g%4*8,g++}return o.create(l,g)}s.enc.Base64={stringify:function(a){var c=a.words,u=a.sigBytes,l=this._map;a.clamp();for(var g=[],p=0;p<u;p+=3)for(var v=(c[p>>>2]>>>24-p%4*8&255)<<16|(c[p+1>>>2]>>>24-(p+1)%4*8&255)<<8|c[p+2>>>2]>>>24-(p+2)%4*8&255,y=0;y<4&&p+.75*y<u;y++)g.push(l.charAt(v>>>6*(3-y)&63));var _=l.charAt(64);if(_)for(;g.length%4;)g.push(_);return g.join("")},parse:function(a){var c=a.length,u=this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var g=0;g<u.length;g++)l[u.charCodeAt(g)]=g}var p=u.charAt(64);if(p){var v=a.indexOf(p);v!==-1&&(c=v)}return i(a,c,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}),Mt="FUNCTION",ks="OBJECT",xs="CLIENT_DB",Nt="pending",Ts="fulfilled",Ft="rejected";function ve(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function hn(t){return ve(t)==="object"}function fn(t){return typeof t=="function"}function Ss(t){return function(){try{return t.apply(t,arguments)}catch(e){console.error(e)}}}var Ut="REJECTED",pn="NOT_PENDING",Ne=class{constructor({createPromise:e,retryRule:n=Ut}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=n}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case Ut:return this.status===Ft;case pn:return this.status!==Nt}}exec(){return this.needRetry?(this.status=Nt,this.promise=this.createPromise().then(e=>(this.status=Ts,Promise.resolve(e)),e=>(this.status=Ft,Promise.reject(e))),this.promise):this.promise}};function Tt(t){return t&&typeof t=="string"?JSON.parse(t):t}var Cs=!1,Is="app",As=Tt(ms),gn=Is;Tt("");var Ps=Tt('[{"provider":"aliyun","spaceName":"ddd","spaceId":"mp-c7fe8bce-ad43-4063-a6e9-56182ea29773","clientSecret":"C1bi2lIFKqrhCQdsTTnMFQ==","endpoint":"https://api.next.bspapp.com"}]')||[],Ds="";try{Ds="__UNI__AFF6350"}catch(t){}var Me={};function de(t,e={}){var n,s;return n=Me,s=t,Object.prototype.hasOwnProperty.call(n,s)||(Me[t]=e),Me[t]}Me=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={};var mn=["invoke","success","fail","complete"],Q=de("_globalUniCloudInterceptor");function yn(t,e){Q[t]||(Q[t]={}),hn(e)&&Object.keys(e).forEach(n=>{mn.indexOf(n)>-1&&function(s,o,i){let a=Q[s][o];a||(a=Q[s][o]=[]),a.indexOf(i)===-1&&fn(i)&&a.push(i)}(t,n,e[n])})}function Os(t,e){Q[t]||(Q[t]={}),hn(e)?Object.keys(e).forEach(n=>{mn.indexOf(n)>-1&&function(s,o,i){let a=Q[s][o];if(!a)return;let c=a.indexOf(i);c>-1&&a.splice(c,1)}(t,n,e[n])}):delete Q[t]}function q(t,e){return t&&t.length!==0?t.reduce((n,s)=>n.then(()=>s(e)),Promise.resolve()):Promise.resolve()}function $(t,e){return Q[t]&&Q[t][e]||[]}function Ls(t){yn("callObject",t)}var Qe=de("_globalUniCloudListener"),X="response",he="needLogin",Fe="refreshToken",Bt="clientdb",Le="cloudfunction",jt="cloudobject";function Se(t){return Qe[t]||(Qe[t]=[]),Qe[t]}function Xe(t,e){let n=Se(t);n.includes(e)||n.push(e)}function Ze(t,e){let n=Se(t),s=n.indexOf(e);s!==-1&&n.splice(s,1)}function V(t,e){let n=Se(t);for(let s=0;s<n.length;s++)(0,n[s])(e)}var et,tt=!1;function _n(){return et||(et=new Promise(t=>{tt&&t(),function e(){if(typeof getCurrentPages=="function"){let n=getCurrentPages();n&&n[0]&&(tt=!0,t())}tt||setTimeout(()=>{e()},30)}()}),et)}function wn(t){let e={};for(let n in t){let s=t[n];fn(s)&&(e[n]=Ss(s))}return e}var A=class extends Error{constructor(e){super(e.message),this.errMsg=e.message||e.errMsg||"unknown system error",this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}},z={request:t=>uni.request(t),uploadFile:t=>uni.uploadFile(t),setStorageSync:(t,e)=>uni.setStorageSync(t,e),getStorageSync:t=>uni.getStorageSync(t),removeStorageSync:t=>uni.removeStorageSync(t),clearStorageSync:()=>uni.clearStorageSync()};function bn(t){return t&&bn(t.__v_raw)||t}function He(){return{token:z.getStorageSync("uni_id_token")||z.getStorageSync("uniIdToken"),tokenExpired:z.getStorageSync("uni_id_token_expired")}}function vn({token:t,tokenExpired:e}={}){t&&z.setStorageSync("uni_id_token",t),e&&z.setStorageSync("uni_id_token_expired",e)}var nt,Re;function kn(){return nt||(nt=uni.getSystemInfoSync()),nt}function Rs(){let t,e;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;let{scene:n,channel:s}=uni.getLaunchOptionsSync();t=s,e=n}}catch(n){}return{channel:t,scene:e}}function xn(){let t=uni.getLocale&&uni.getLocale()||"en";if(Re)return j(L({},Re),{locale:t,LOCALE:t});let e=kn(),{deviceId:n,osName:s,uniPlatform:o,appId:i}=e,a=["pixelRatio","brand","model","system","language","version","platform","host","SDKVersion","swanNativeVersion","app","AppPlatform","fontSizeSetting"];for(let c=0;c<a.length;c++)delete e[a[c]];return Re=L(L({PLATFORM:o,OS:s,APPID:i,DEVICEID:n},Rs()),e),j(L({},Re),{locale:t,LOCALE:t})}var _e={sign:function(t,e){let n="";return Object.keys(t).sort().forEach(function(s){t[s]&&(n=n+"&"+s+"="+t[s])}),n=n.slice(1),ws(n,e).toString()},wrappedRequest:function(t,e){return new Promise((n,s)=>{e(Object.assign(t,{complete(o){o||(o={});let i=o.data&&o.data.header&&o.data.header["x-serverless-request-id"]||o.header&&o.header["request-id"];if(!o.statusCode||o.statusCode>=400){let c=o.data&&o.data.error&&o.data.error.code||"SYS_ERR",u=o.data&&o.data.error&&o.data.error.message||o.errMsg||"request:fail";return s(new A({code:c,message:u,requestId:i}))}let a=o.data;if(a.error)return s(new A({code:a.error.code,message:a.error.message,requestId:i}));a.result=a.data,a.requestId=i,delete a.data,n(a)}}))})},toBase64:function(t){return vs.stringify(bs.parse(t))}},Tn=class{constructor(t){["spaceId","clientSecret"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(`${e} required`)}),this.config=Object.assign({},{endpoint:t.spaceId.indexOf("mp-")===0?"https://api.next.bspapp.com":"https://api.bspapp.com"},t),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=z,this._getAccessTokenPromiseHub=new Ne({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then(e=>{if(!e.result||!e.result.accessToken)throw new A({code:"AUTH_FAILED",message:"\u83B7\u53D6accessToken\u5931\u8D25"});this.setAccessToken(e.result.accessToken)}),retryRule:pn})}get hasAccessToken(){return!!this.accessToken}setAccessToken(t){this.accessToken=t}requestWrapped(t){return _e.wrappedRequest(t,this.adapter.request)}requestAuth(t){return this.requestWrapped(t)}request(t,e){return Promise.resolve().then(()=>this.hasAccessToken?e?this.requestWrapped(t):this.requestWrapped(t).catch(n=>new Promise((s,o)=>{!n||n.code!=="GATEWAY_INVALID_TOKEN"&&n.code!=="InvalidParameter.InvalidToken"?o(n):s()}).then(()=>this.getAccessToken()).then(()=>{let s=this.rebuildRequest(t);return this.request(s,!0)})):this.getAccessToken().then(()=>{let n=this.rebuildRequest(t);return this.request(n,!0)}))}rebuildRequest(t){let e=Object.assign({},t);return e.data.token=this.accessToken,e.header["x-basement-token"]=this.accessToken,e.header["x-serverless-sign"]=_e.sign(e.data,this.config.clientSecret),e}setupRequest(t,e){let n=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now()}),s={"Content-Type":"application/json"};return e!=="auth"&&(n.token=this.accessToken,s["x-basement-token"]=this.accessToken),s["x-serverless-sign"]=_e.sign(n,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:s}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}authorize(){return P(this,null,function*(){yield this.getAccessToken()})}callFunction(t){let e={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:t.name,functionArgs:t.data||{}})};return this.request(this.setupRequest(e))}getOSSUploadOptionsFromPath(t){let e={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}uploadFileToOSS({url:t,formData:e,name:n,filePath:s,fileType:o,onUploadProgress:i}){return new Promise((a,c)=>{let u=this.adapter.uploadFile({url:t,formData:e,name:n,filePath:s,fileType:o,header:{"X-OSS-server-side-encrpytion":"AES256"},success(l){l&&l.statusCode<400?a(l):c(new A({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(l){c(new A({code:l.code||"UPLOAD_FAILED",message:l.message||l.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof i=="function"&&u&&typeof u.onProgressUpdate=="function"&&u.onProgressUpdate(l=>{i({loaded:l.totalBytesSent,total:l.totalBytesExpectedToSend})})})}reportOSSUpload(t){let e={method:"serverless.file.resource.report",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}uploadFile(a){return P(this,arguments,function*({filePath:t,cloudPath:e,fileType:n="image",cloudPathAsRealPath:s=!1,onUploadProgress:o,config:i}){if(ve(e)!=="string")throw new A({code:"INVALID_PARAM",message:"cloudPath\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u7C7B\u578B"});if(!(e=e.trim()))throw new A({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});if(/:\/\//.test(e))throw new A({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u5408\u6CD5"});let c=i&&i.envType||this.config.envType;if(s&&(e[0]!=="/"&&(e="/"+e),e.indexOf("\\")>-1))throw new A({code:"INVALID_PARAM",message:"\u4F7F\u7528cloudPath\u4F5C\u4E3A\u8DEF\u5F84\u65F6\uFF0CcloudPath\u4E0D\u53EF\u5305\u542B\u201C\\\u201D"});let u=(yield this.getOSSUploadOptionsFromPath({env:c,filename:s?e.split("/").pop():e,fileId:s?e:void 0})).result,l="https://"+u.cdnDomain+"/"+u.ossPath,{securityToken:g,accessKeyId:p,signature:v,host:y,ossPath:_,id:h,policy:d,ossCallbackUrl:f}=u,w={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:p,Signature:v,host:y,id:h,key:_,policy:d,success_action_status:200};if(g&&(w["x-oss-security-token"]=g),f){let b=JSON.stringify({callbackUrl:f,callbackBody:JSON.stringify({fileId:h,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});w.callback=_e.toBase64(b)}let m={url:"https://"+u.host,formData:w,fileName:"file",name:"file",filePath:t,fileType:n};if(yield this.uploadFileToOSS(Object.assign({},m,{onUploadProgress:o})),f)return{success:!0,filePath:t,fileID:l};if((yield this.reportOSSUpload({id:h})).success)return{success:!0,filePath:t,fileID:l};throw new A({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"})})}getTempFileURL({fileList:t}={}){return new Promise((e,n)=>{Array.isArray(t)&&t.length!==0||n(new A({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"})),e({fileList:t.map(s=>({fileID:s,tempFileURL:s}))})})}getFileInfo(){return P(this,arguments,function*({fileList:t}={}){if(!Array.isArray(t)||t.length===0)throw new A({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"});let e={method:"serverless.file.resource.info",params:JSON.stringify({id:t.map(n=>n.split("?")[0]).join(",")})};return{fileList:(yield this.request(this.setupRequest(e))).result}})}},Es={init(t){let e=new Tn(t),n={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return n},e.customAuth=e.auth,e}},Ms=typeof location!="undefined"&&location.protocol==="http:"?"http:":"https:",qt;(function(t){t.local="local",t.none="none",t.session="session"})(qt||(qt={}));var Ns=function(){},Fs=Z(function(t,e){var n;t.exports=(n=se,function(s){var o=n,i=o.lib,a=i.WordArray,c=i.Hasher,u=o.algo,l=[],g=[];(function(){function y(f){for(var w=s.sqrt(f),m=2;m<=w;m++)if(!(f%m))return!1;return!0}function _(f){return 4294967296*(f-(0|f))|0}for(var h=2,d=0;d<64;)y(h)&&(d<8&&(l[d]=_(s.pow(h,.5))),g[d]=_(s.pow(h,1/3)),d++),h++})();var p=[],v=u.SHA256=c.extend({_doReset:function(){this._hash=new a.init(l.slice(0))},_doProcessBlock:function(y,_){for(var h=this._hash.words,d=h[0],f=h[1],w=h[2],m=h[3],b=h[4],k=h[5],I=h[6],O=h[7],D=0;D<64;D++){if(D<16)p[D]=0|y[_+D];else{var R=p[D-15],H=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,F=p[D-2],G=(F<<15|F>>>17)^(F<<13|F>>>19)^F>>>10;p[D]=H+p[D-7]+G+p[D-16]}var B=d&f^d&w^f&w,ee=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),K=O+((b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25))+(b&k^~b&I)+g[D]+p[D];O=I,I=k,k=b,b=m+K|0,m=w,w=f,f=d,d=K+(ee+B)|0}h[0]=h[0]+d|0,h[1]=h[1]+f|0,h[2]=h[2]+w|0,h[3]=h[3]+m|0,h[4]=h[4]+b|0,h[5]=h[5]+k|0,h[6]=h[6]+I|0,h[7]=h[7]+O|0},_doFinalize:function(){var y=this._data,_=y.words,h=8*this._nDataBytes,d=8*y.sigBytes;return _[d>>>5]|=128<<24-d%32,_[14+(d+64>>>9<<4)]=s.floor(h/4294967296),_[15+(d+64>>>9<<4)]=h,y.sigBytes=4*_.length,this._process(),this._hash},clone:function(){var y=c.clone.call(this);return y._hash=this._hash.clone(),y}});o.SHA256=c._createHelper(v),o.HmacSHA256=c._createHmacHelper(v)}(Math),n.SHA256)}),$t=Fs,Us=Z(function(t,e){t.exports=se.HmacSHA256}),Ce=()=>{let t;if(!Promise){t=()=>{},t.promise={};let n=()=>{throw new A({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(t.promise,"then",{get:n}),Object.defineProperty(t.promise,"catch",{get:n}),t}let e=new Promise((n,s)=>{t=(o,i)=>o?s(o):n(i)});return t.promise=e,t};function Bs(t){return t===void 0}function js(t){return Object.prototype.toString.call(t)==="[object Null]"}var zt;function qs(t){let e=(n=t,Object.prototype.toString.call(n)==="[object Array]"?t:[t]);var n;for(let s of e){let{isMatch:o,genAdapter:i,runtime:a}=s;if(o())return{adapter:i(),runtime:a}}}(function(t){t.WEB="web",t.WX_MP="wx_mp"})(zt||(zt={}));var U={adapter:null,runtime:void 0},$s=["anonymousUuidKey"],we=class extends Ns{constructor(){super(),U.adapter.root.tcbObject||(U.adapter.root.tcbObject={})}setItem(e,n){U.adapter.root.tcbObject[e]=n}getItem(e){return U.adapter.root.tcbObject[e]}removeItem(e){delete U.adapter.root.tcbObject[e]}clear(){delete U.adapter.root.tcbObject}};function Wt(t,e){switch(t){case"local":return e.localStorage||new we;case"none":return new we;default:return e.sessionStorage||new we}}var Ue=class{constructor(e){if(!this._storage){this._persistence=U.adapter.primaryStorage||e.persistence,this._storage=Wt(this._persistence,U.adapter);let n=`access_token_${e.env}`,s=`access_token_expire_${e.env}`,o=`refresh_token_${e.env}`,i=`anonymous_uuid_${e.env}`,a=`login_type_${e.env}`,c=`user_info_${e.env}`;this.keys={accessTokenKey:n,accessTokenExpireKey:s,refreshTokenKey:o,anonymousUuidKey:i,loginTypeKey:a,userInfoKey:c}}}updatePersistence(e){if(e===this._persistence)return;let n=this._persistence==="local";this._persistence=e;let s=Wt(e,U.adapter);for(let o in this.keys){let i=this.keys[o];if(n&&$s.includes(o))continue;let a=this._storage.getItem(i);Bs(a)||js(a)||(s.setItem(i,a),this._storage.removeItem(i))}this._storage=s}setStore(e,n,s){if(!this._storage)return;let o={version:s||"localCachev1",content:n},i=JSON.stringify(o);try{this._storage.setItem(e,i)}catch(a){throw a}}getStore(e,n){try{if(!this._storage)return}catch(o){return""}n=n||"localCachev1";let s=this._storage.getItem(e);return s&&s.indexOf(n)>=0?JSON.parse(s).content:""}removeStore(e){this._storage.removeItem(e)}},Sn={},Cn={};function Ie(t){return Sn[t]}var Be=class{constructor(e,n){this.data=n||null,this.name=e}},ct=class extends Be{constructor(e,n){super("error",{error:e,data:n}),this.error=e}},St=new class{constructor(){this._listeners={}}on(t,e){return function(n,s,o){o[n]=o[n]||[],o[n].push(s)}(t,e,this._listeners),this}off(t,e){return function(n,s,o){if(o&&o[n]){let i=o[n].indexOf(s);i!==-1&&o[n].splice(i,1)}}(t,e,this._listeners),this}fire(t,e){if(t instanceof ct)return console.error(t.error),this;let n=typeof t=="string"?new Be(t,e||{}):t,s=n.name;if(this._listens(s)){n.target=this;let o=this._listeners[s]?[...this._listeners[s]]:[];for(let i of o)i.call(this,n)}return this}_listens(t){return this._listeners[t]&&this._listeners[t].length>0}};function ne(t,e){St.on(t,e)}function W(t,e={}){St.fire(t,e)}function zs(t,e){St.off(t,e)}var fe="loginStateChanged",In="loginStateExpire",oe="loginTypeChanged",lt="anonymousConverted",An="refreshAccessToken",M;(function(t){t.ANONYMOUS="ANONYMOUS",t.WECHAT="WECHAT",t.WECHAT_PUBLIC="WECHAT-PUBLIC",t.WECHAT_OPEN="WECHAT-OPEN",t.CUSTOM="CUSTOM",t.EMAIL="EMAIL",t.USERNAME="USERNAME",t.NULL="NULL"})(M||(M={}));var Ht=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],Ws={"X-SDK-Version":"1.3.5"};function st(t,e,n){let s=t[e];t[e]=function(o){let i={},a={};n.forEach(u=>{let{data:l,headers:g}=u.call(t,o);Object.assign(i,l),Object.assign(a,g)});let c=o.data;return c&&(()=>{var u;if(u=c,Object.prototype.toString.call(u)!=="[object FormData]")o.data=L(L({},c),i);else for(let l in i)c.append(l,i[l])})(),o.headers=L(L({},o.headers||{}),a),s.call(t,o)}}function ot(){let t=Math.random().toString(16).slice(2);return{data:{seqId:t},headers:j(L({},Ws),{"x-seqid":t})}}var ut=class{constructor(e={}){var n;this.config=e,this._reqClass=new U.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`\u8BF7\u6C42\u5728${this.config.timeout/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`,restrictedMethods:["post"]}),this._cache=Ie(this.config.env),this._localCache=(n=this.config.env,Cn[n]),st(this._reqClass,"post",[ot]),st(this._reqClass,"upload",[ot]),st(this._reqClass,"download",[ot])}post(e){return P(this,null,function*(){return yield this._reqClass.post(e)})}upload(e){return P(this,null,function*(){return yield this._reqClass.upload(e)})}download(e){return P(this,null,function*(){return yield this._reqClass.download(e)})}refreshAccessToken(){return P(this,null,function*(){let e,n;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=yield this._refreshAccessTokenPromise}catch(s){n=s}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,n)throw n;return e})}_refreshAccessToken(){return P(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:n,refreshTokenKey:s,loginTypeKey:o,anonymousUuidKey:i}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(n);let a=this._cache.getStore(s);if(!a)throw new A({message:"\u672A\u767B\u5F55CloudBase"});let c={refresh_token:a},u=yield this.request("auth.fetchAccessTokenWithRefreshToken",c);if(u.data.code){let{code:l}=u.data;if(l==="SIGN_PARAM_INVALID"||l==="REFRESH_TOKEN_EXPIRED"||l==="INVALID_REFRESH_TOKEN"){if(this._cache.getStore(o)===M.ANONYMOUS&&l==="INVALID_REFRESH_TOKEN"){let g=this._cache.getStore(i),p=this._cache.getStore(s),v=yield this.send("auth.signInAnonymously",{anonymous_uuid:g,refresh_token:p});return this.setRefreshToken(v.refresh_token),this._refreshAccessToken()}W(In),this._cache.removeStore(s)}throw new A({code:u.data.code,message:`\u5237\u65B0access token\u5931\u8D25\uFF1A${u.data.code}`})}if(u.data.access_token)return W(An),this._cache.setStore(e,u.data.access_token),this._cache.setStore(n,u.data.access_token_expire+Date.now()),{accessToken:u.data.access_token,accessTokenExpire:u.data.access_token_expire};u.data.refresh_token&&(this._cache.removeStore(s),this._cache.setStore(s,u.data.refresh_token),this._refreshAccessToken())})}getAccessToken(){return P(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:n,refreshTokenKey:s}=this._cache.keys;if(!this._cache.getStore(s))throw new A({message:"refresh token\u4E0D\u5B58\u5728\uFF0C\u767B\u5F55\u72B6\u6001\u5F02\u5E38"});let o=this._cache.getStore(e),i=this._cache.getStore(n),a=!0;return this._shouldRefreshAccessTokenHook&&!(yield this._shouldRefreshAccessTokenHook(o,i))&&(a=!1),(!o||!i||i<Date.now())&&a?this.refreshAccessToken():{accessToken:o,accessTokenExpire:i}})}request(e,n,s){return P(this,null,function*(){let o=`x-tcb-trace_${this.config.env}`,i="application/x-www-form-urlencoded",a=L({action:e,env:this.config.env,dataVersion:"2019-08-16"},n);if(Ht.indexOf(e)===-1){let{refreshTokenKey:f}=this._cache.keys;this._cache.getStore(f)&&(a.access_token=(yield this.getAccessToken()).accessToken)}let c;if(e==="storage.uploadFile"){c=new FormData;for(let f in c)c.hasOwnProperty(f)&&c[f]!==void 0&&c.append(f,a[f]);i="multipart/form-data"}else{i="application/json",c={};for(let f in a)a[f]!==void 0&&(c[f]=a[f])}let u={headers:{"content-type":i}};s&&s.onUploadProgress&&(u.onUploadProgress=s.onUploadProgress);let l=this._localCache.getStore(o);l&&(u.headers["X-TCB-Trace"]=l);let{parse:g,inQuery:p,search:v}=n,y={env:this.config.env};g&&(y.parse=!0),p&&(y=L(L({},p),y));let _=function(f,w,m={}){let b=/\?/.test(w),k="";for(let I in m)k===""?!b&&(w+="?"):k+="&",k+=`${I}=${encodeURIComponent(m[I])}`;return/^http(s)?\:\/\//.test(w+=k)?w:`${f}${w}`}(Ms,"//tcb-api.tencentcloudapi.com/web",y);v&&(_+=v);let h=yield this.post(L({url:_,data:c},u)),d=h.header&&h.header["x-tcb-trace"];if(d&&this._localCache.setStore(o,d),Number(h.status)!==200&&Number(h.statusCode)!==200||!h.data)throw new A({code:"NETWORK_ERROR",message:"network request error"});return h})}send(s){return P(this,arguments,function*(e,n={}){let o=yield this.request(e,n,{onUploadProgress:n.onUploadProgress});if(o.data.code==="ACCESS_TOKEN_EXPIRED"&&Ht.indexOf(e)===-1){yield this.refreshAccessToken();let i=yield this.request(e,n,{onUploadProgress:n.onUploadProgress});if(i.data.code)throw new A({code:i.data.code,message:i.data.message});return i.data}if(o.data.code)throw new A({code:o.data.code,message:o.data.message});return o.data})}setRefreshToken(e){let{accessTokenKey:n,accessTokenExpireKey:s,refreshTokenKey:o}=this._cache.keys;this._cache.removeStore(n),this._cache.removeStore(s),this._cache.setStore(o,e)}},Pn={};function te(t){return Pn[t]}var pe=class{constructor(e){this.config=e,this._cache=Ie(e.env),this._request=te(e.env)}setRefreshToken(e){let{accessTokenKey:n,accessTokenExpireKey:s,refreshTokenKey:o}=this._cache.keys;this._cache.removeStore(n),this._cache.removeStore(s),this._cache.setStore(o,e)}setAccessToken(e,n){let{accessTokenKey:s,accessTokenExpireKey:o}=this._cache.keys;this._cache.setStore(s,e),this._cache.setStore(o,n)}refreshUserInfo(){return P(this,null,function*(){let{data:e}=yield this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e})}setLocalUserInfo(e){let{userInfoKey:n}=this._cache.keys;this._cache.setStore(n,e)}},dt=class{constructor(e){if(!e)throw new A({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=Ie(this._envId),this._request=te(this._envId),this.setUserInfo()}linkWithTicket(e){if(typeof e!="string")throw new A({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,n){return this._request.send("auth.updatePassword",{oldPassword:n,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if(typeof e!="string")throw new A({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}getLinkedUidList(){return P(this,null,function*(){let{data:e}=yield this._request.send("auth.getLinkedUidList",{}),n=!1,{users:s}=e;return s.forEach(o=>{o.wxOpenId&&o.wxPublicId&&(n=!0)}),{users:s,hasPrimaryUid:n}})}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}update(e){return P(this,null,function*(){let{nickName:n,gender:s,avatarUrl:o,province:i,country:a,city:c}=e,{data:u}=yield this._request.send("auth.updateUserInfo",{nickName:n,gender:s,avatarUrl:o,province:i,country:a,city:c});this.setLocalUserInfo(u)})}refresh(){return P(this,null,function*(){let{data:e}=yield this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e})}setUserInfo(){let{userInfoKey:e}=this._cache.keys,n=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach(s=>{this[s]=n[s]}),this.location={country:n.country,province:n.province,city:n.city}}setLocalUserInfo(e){let{userInfoKey:n}=this._cache.keys;this._cache.setStore(n,e),this.setUserInfo()}},le=class{constructor(e){if(!e)throw new A({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=Ie(e);let{refreshTokenKey:n,accessTokenKey:s,accessTokenExpireKey:o}=this._cache.keys,i=this._cache.getStore(n),a=this._cache.getStore(s),c=this._cache.getStore(o);this.credential={refreshToken:i,accessToken:a,accessTokenExpire:c},this.user=new dt(e)}get isAnonymousAuth(){return this.loginType===M.ANONYMOUS}get isCustomAuth(){return this.loginType===M.CUSTOM}get isWeixinAuth(){return this.loginType===M.WECHAT||this.loginType===M.WECHAT_OPEN||this.loginType===M.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}},be=class extends pe{signIn(){return P(this,null,function*(){this._cache.updatePersistence("local");let{anonymousUuidKey:e,refreshTokenKey:n}=this._cache.keys,s=this._cache.getStore(e)||void 0,o=this._cache.getStore(n)||void 0,i=yield this._request.send("auth.signInAnonymously",{anonymous_uuid:s,refresh_token:o});if(i.uuid&&i.refresh_token){this._setAnonymousUUID(i.uuid),this.setRefreshToken(i.refresh_token),yield this._request.refreshAccessToken(),W(fe),W(oe,{env:this.config.env,loginType:M.ANONYMOUS,persistence:"local"});let a=new le(this.config.env);return yield a.user.refresh(),a}throw new A({message:"\u533F\u540D\u767B\u5F55\u5931\u8D25"})})}linkAndRetrieveDataWithTicket(e){return P(this,null,function*(){let{anonymousUuidKey:n,refreshTokenKey:s}=this._cache.keys,o=this._cache.getStore(n),i=this._cache.getStore(s),a=yield this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:o,refresh_token:i,ticket:e});if(a.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(a.refresh_token),yield this._request.refreshAccessToken(),W(lt,{env:this.config.env}),W(oe,{loginType:M.CUSTOM,persistence:"local"}),{credential:{refreshToken:a.refresh_token}};throw new A({message:"\u533F\u540D\u8F6C\u5316\u5931\u8D25"})})}_setAnonymousUUID(e){let{anonymousUuidKey:n,loginTypeKey:s}=this._cache.keys;this._cache.removeStore(n),this._cache.setStore(n,e),this._cache.setStore(s,M.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}},je=class extends pe{signIn(e){return P(this,null,function*(){if(typeof e!="string")throw new A({code:"PARAM_ERROR",message:"ticket must be a string"});let{refreshTokenKey:n}=this._cache.keys,s=yield this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(n)||""});if(s.refresh_token)return this.setRefreshToken(s.refresh_token),yield this._request.refreshAccessToken(),W(fe),W(oe,{env:this.config.env,loginType:M.CUSTOM,persistence:this.config.persistence}),yield this.refreshUserInfo(),new le(this.config.env);throw new A({message:"\u81EA\u5B9A\u4E49\u767B\u5F55\u5931\u8D25"})})}},qe=class extends pe{signIn(e,n){return P(this,null,function*(){if(typeof e!="string")throw new A({code:"PARAM_ERROR",message:"email must be a string"});let{refreshTokenKey:s}=this._cache.keys,o=yield this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:n,refresh_token:this._cache.getStore(s)||""}),{refresh_token:i,access_token:a,access_token_expire:c}=o;if(i)return this.setRefreshToken(i),a&&c?this.setAccessToken(a,c):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),W(fe),W(oe,{env:this.config.env,loginType:M.EMAIL,persistence:this.config.persistence}),new le(this.config.env);throw o.code?new A({code:o.code,message:`\u90AE\u7BB1\u767B\u5F55\u5931\u8D25: ${o.message}`}):new A({message:"\u90AE\u7BB1\u767B\u5F55\u5931\u8D25"})})}activate(e){return P(this,null,function*(){return this._request.send("auth.activateEndUserMail",{token:e})})}resetPasswordWithToken(e,n){return P(this,null,function*(){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:n})})}},$e=class extends pe{signIn(e,n){return P(this,null,function*(){if(typeof e!="string")throw new A({code:"PARAM_ERROR",message:"username must be a string"});typeof n!="string"&&(n="",console.warn("password is empty"));let{refreshTokenKey:s}=this._cache.keys,o=yield this._request.send("auth.signIn",{loginType:M.USERNAME,username:e,password:n,refresh_token:this._cache.getStore(s)||""}),{refresh_token:i,access_token_expire:a,access_token:c}=o;if(i)return this.setRefreshToken(i),c&&a?this.setAccessToken(c,a):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),W(fe),W(oe,{env:this.config.env,loginType:M.USERNAME,persistence:this.config.persistence}),new le(this.config.env);throw o.code?new A({code:o.code,message:`\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25: ${o.message}`}):new A({message:"\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25"})})}},ht=class{constructor(e){this.config=e,this._cache=Ie(e.env),this._request=te(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),ne(oe,this._onLoginTypeChanged)}get currentUser(){let e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new be(this.config)}customAuthProvider(){return new je(this.config)}emailAuthProvider(){return new qe(this.config)}usernameAuthProvider(){return new $e(this.config)}signInAnonymously(){return P(this,null,function*(){return new be(this.config).signIn()})}signInWithEmailAndPassword(e,n){return P(this,null,function*(){return new qe(this.config).signIn(e,n)})}signInWithUsernameAndPassword(e,n){return new $e(this.config).signIn(e,n)}linkAndRetrieveDataWithTicket(e){return P(this,null,function*(){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new be(this.config)),ne(lt,this._onAnonymousConverted),yield this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)})}signOut(){return P(this,null,function*(){if(this.loginType===M.ANONYMOUS)throw new A({message:"\u533F\u540D\u7528\u6237\u4E0D\u652F\u6301\u767B\u51FA\u64CD\u4F5C"});let{refreshTokenKey:e,accessTokenKey:n,accessTokenExpireKey:s}=this._cache.keys,o=this._cache.getStore(e);if(!o)return;let i=yield this._request.send("auth.logout",{refresh_token:o});return this._cache.removeStore(e),this._cache.removeStore(n),this._cache.removeStore(s),W(fe),W(oe,{env:this.config.env,loginType:M.NULL,persistence:this.config.persistence}),i})}signUpWithEmailAndPassword(e,n){return P(this,null,function*(){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:n})})}sendPasswordResetEmail(e){return P(this,null,function*(){return this._request.send("auth.sendPasswordResetEmail",{email:e})})}onLoginStateChanged(e){ne(fe,()=>{let s=this.hasLoginState();e.call(this,s)});let n=this.hasLoginState();e.call(this,n)}onLoginStateExpired(e){ne(In,e.bind(this))}onAccessTokenRefreshed(e){ne(An,e.bind(this))}onAnonymousConverted(e){ne(lt,e.bind(this))}onLoginTypeChanged(e){ne(oe,()=>{let n=this.hasLoginState();e.call(this,n)})}getAccessToken(){return P(this,null,function*(){return{accessToken:(yield this._request.getAccessToken()).accessToken,env:this.config.env}})}hasLoginState(){let{refreshTokenKey:e}=this._cache.keys;return this._cache.getStore(e)?new le(this.config.env):null}isUsernameRegistered(e){return P(this,null,function*(){if(typeof e!="string")throw new A({code:"PARAM_ERROR",message:"username must be a string"});let{data:n}=yield this._request.send("auth.isUsernameRegistered",{username:e});return n&&n.isRegistered})}getLoginState(){return Promise.resolve(this.hasLoginState())}signInWithTicket(e){return P(this,null,function*(){return new je(this.config).signIn(e)})}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then(e=>e.code?e:j(L({},e.data),{requestId:e.seqId}))}getAuthHeader(){let{refreshTokenKey:e,accessTokenKey:n}=this._cache.keys,s=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(n)+"/@@/"+s}}_onAnonymousConverted(e){let{env:n}=e.data;n===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){let{loginType:n,persistence:s,env:o}=e.data;o===this.config.env&&(this._cache.updatePersistence(s),this._cache.setStore(this._cache.keys.loginTypeKey,n))}},Hs=function(t,e){e=e||Ce();let n=te(this.config.env),{cloudPath:s,filePath:o,onUploadProgress:i,fileType:a="image"}=t;return n.send("storage.getUploadMetadata",{path:s}).then(c=>{let{data:{url:u,authorization:l,token:g,fileId:p,cosFileId:v},requestId:y}=c,_={key:s,signature:l,"x-cos-meta-fileid":v,success_action_status:"201","x-cos-security-token":g};n.upload({url:u,data:_,file:o,name:s,fileType:a,onUploadProgress:i}).then(h=>{h.statusCode===201?e(null,{fileID:p,requestId:y}):e(new A({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${h.data}`}))}).catch(h=>{e(h)})}).catch(c=>{e(c)}),e.promise},Ks=function(t,e){e=e||Ce();let n=te(this.config.env),{cloudPath:s}=t;return n.send("storage.getUploadMetadata",{path:s}).then(o=>{e(null,o)}).catch(o=>{e(o)}),e.promise},Vs=function({fileList:t},e){if(e=e||Ce(),!t||!Array.isArray(t))return{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"};for(let s of t)if(!s||typeof s!="string")return{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"};let n={fileid_list:t};return te(this.config.env).send("storage.batchDeleteFile",n).then(s=>{s.code?e(null,s):e(null,{fileList:s.data.delete_list,requestId:s.requestId})}).catch(s=>{e(s)}),e.promise},Dn=function({fileList:t},e){e=e||Ce(),t&&Array.isArray(t)||e(null,{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"});let n=[];for(let o of t)typeof o=="object"?(o.hasOwnProperty("fileID")&&o.hasOwnProperty("maxAge")||e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5305\u542BfileID\u548CmaxAge\u7684\u5BF9\u8C61"}),n.push({fileid:o.fileID,max_age:o.maxAge})):typeof o=="string"?n.push({fileid:o}):e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5B57\u7B26\u4E32"});let s={file_list:n};return te(this.config.env).send("storage.batchGetDownloadUrl",s).then(o=>{o.code?e(null,o):e(null,{fileList:o.data.download_list,requestId:o.requestId})}).catch(o=>{e(o)}),e.promise},Js=function(n,s){return P(this,arguments,function*({fileID:t},e){let o=(yield Dn.call(this,{fileList:[{fileID:t,maxAge:600}]})).fileList[0];if(o.code!=="SUCCESS")return e?e(o):new Promise(c=>{c(o)});let i=te(this.config.env),a=o.download_url;if(a=encodeURI(a),!e)return i.download({url:a});e(yield i.download({url:a}))})},Ys=function({name:t,data:e,query:n,parse:s,search:o},i){let a=i||Ce(),c;try{c=e?JSON.stringify(e):""}catch(l){return Promise.reject(l)}if(!t)return Promise.reject(new A({code:"PARAM_ERROR",message:"\u51FD\u6570\u540D\u4E0D\u80FD\u4E3A\u7A7A"}));let u={inQuery:n,parse:s,search:o,function_name:t,request_data:c};return te(this.config.env).send("functions.invokeFunction",u).then(l=>{if(l.code)a(null,l);else{let g=l.data.response_data;if(s)a(null,{result:g,requestId:l.requestId});else try{g=JSON.parse(l.data.response_data),a(null,{result:g,requestId:l.requestId})}catch(p){a(new A({message:"response data must be json"}))}}return a.promise}).catch(l=>{a(l)}),a.promise},Kt={timeout:15e3,persistence:"session"},Vt={},ft=class t{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(U.adapter||(this.requestClient=new U.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`\u8BF7\u6C42\u5728${(e.timeout||5e3)/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`})),this.config=L(L({},Kt),e),!0){case this.config.timeout>6e5:console.warn("timeout\u5927\u4E8E\u53EF\u914D\u7F6E\u4E0A\u9650[10\u5206\u949F]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0A\u9650\u6570\u503C"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout\u5C0F\u4E8E\u53EF\u914D\u7F6E\u4E0B\u9650[100ms]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0B\u9650\u6570\u503C"),this.config.timeout=100}return new t(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;let n=e||U.adapter.primaryStorage||Kt.persistence;var s;return n!==this.config.persistence&&(this.config.persistence=n),function(o){let{env:i}=o;Sn[i]=new Ue(o),Cn[i]=new Ue(j(L({},o),{persistence:"local"}))}(this.config),s=this.config,Pn[s.env]=new ut(s),this.authObj=new ht(this.config),this.authObj}on(e,n){return ne.apply(this,[e,n])}off(e,n){return zs.apply(this,[e,n])}callFunction(e,n){return Ys.apply(this,[e,n])}deleteFile(e,n){return Vs.apply(this,[e,n])}getTempFileURL(e,n){return Dn.apply(this,[e,n])}downloadFile(e,n){return Js.apply(this,[e,n])}uploadFile(e,n){return Hs.apply(this,[e,n])}getUploadMetadata(e,n){return Ks.apply(this,[e,n])}registerExtension(e){Vt[e.name]=e}invokeExtension(e,n){return P(this,null,function*(){let s=Vt[e];if(!s)throw new A({message:`\u6269\u5C55${e} \u5FC5\u987B\u5148\u6CE8\u518C`});return yield s.invoke(n,this)})}useAdapters(e){let{adapter:n,runtime:s}=qs(e)||{};n&&(U.adapter=n),s&&(U.runtime=s)}},On=new ft;function Jt(t,e,n){n===void 0&&(n={});var s=/\?/.test(e),o="";for(var i in n)o===""?!s&&(e+="?"):o+="&",o+=i+"="+encodeURIComponent(n[i]);return/^http(s)?:\/\//.test(e+=o)?e:""+t+e}var pt=class{post(e){let{url:n,data:s,headers:o}=e;return new Promise((i,a)=>{z.request({url:Jt("https:",n),data:s,method:"POST",header:o,success(c){i(c)},fail(c){a(c)}})})}upload(e){return new Promise((n,s)=>{let{url:o,file:i,data:a,headers:c,fileType:u}=e,l=z.uploadFile({url:Jt("https:",o),name:"file",formData:Object.assign({},a),filePath:i,fileType:u,header:c,success(g){let p={statusCode:g.statusCode,data:g.data||{}};g.statusCode===200&&a.success_action_status&&(p.statusCode=parseInt(a.success_action_status,10)),n(p)},fail(g){s(new Error(g.errMsg||"uploadFile:fail"))}});typeof e.onUploadProgress=="function"&&l&&typeof l.onProgressUpdate=="function"&&l.onProgressUpdate(g=>{e.onUploadProgress({loaded:g.totalBytesSent,total:g.totalBytesExpectedToSend})})})}},Gs={setItem(t,e){z.setStorageSync(t,e)},getItem:t=>z.getStorageSync(t),removeItem(t){z.removeStorageSync(t)},clear(){z.clearStorageSync()}},Qs={genAdapter:function(){return{root:{},reqClass:pt,localStorage:Gs,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};On.useAdapters(Qs);var Ct=On,Xs=Ct.init;Ct.init=function(t){t.env=t.spaceId;let e=Xs.call(this,t);e.config.provider="tencent",e.config.spaceId=t.spaceId;let n=e.auth;return e.auth=function(s){let o=n.call(this,s);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach(i=>{var a;o[i]=(a=o[i],function(c){c=c||{};let{success:u,fail:l,complete:g}=wn(c);if(!(u||l||g))return a.call(this,c);a.call(this,c).then(p=>{u&&u(p),g&&g(p)},p=>{l&&l(p),g&&g(p)})}).bind(o)}),o},e.customAuth=e.auth,e};var Yt=Ct,Zs=class extends Tn{getAccessToken(){return new Promise((t,e)=>{let n="Anonymous_Access_token";this.setAccessToken(n),t(n)})}setupRequest(t,e){let n=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now()}),s={"Content-Type":"application/json"};e!=="auth"&&(n.token=this.accessToken,s["x-basement-token"]=this.accessToken),s["x-serverless-sign"]=_e.sign(n,this.config.clientSecret);let o=xn();s["x-client-info"]=encodeURIComponent(JSON.stringify(o));let{token:i}=He();return s["x-client-token"]=i,{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:JSON.parse(JSON.stringify(s))}}uploadFileToOSS({url:t,formData:e,name:n,filePath:s,fileType:o,onUploadProgress:i}){return new Promise((a,c)=>{let u=this.adapter.uploadFile({url:t,formData:e,name:n,filePath:s,fileType:o,success(l){l&&l.statusCode<400?a(l):c(new A({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(l){c(new A({code:l.code||"UPLOAD_FAILED",message:l.message||l.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof i=="function"&&u&&typeof u.onProgressUpdate=="function"&&u.onProgressUpdate(l=>{i({loaded:l.totalBytesSent,total:l.totalBytesExpectedToSend})})})}uploadFile({filePath:t,cloudPath:e,fileType:n="image",onUploadProgress:s}){if(!e)throw new A({code:"CLOUDPATH_REQUIRED",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});let o;return this.getOSSUploadOptionsFromPath({cloudPath:e}).then(i=>{let{url:a,formData:c,name:u}=i.result;o=i.result.fileUrl;let l={url:a,formData:c,name:u,filePath:t,fileType:n};return this.uploadFileToOSS(Object.assign({},l,{onUploadProgress:s}))}).then(()=>this.reportOSSUpload({cloudPath:e})).then(i=>new Promise((a,c)=>{i.success?a({success:!0,filePath:t,fileID:o}):c(new A({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}))}deleteFile({fileList:t}){let e={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:t})};return this.request(this.setupRequest(e)).then(n=>{if(n.success)return n.result;throw new A({code:"DELETE_FILE_FAILED",message:"\u5220\u9664\u6587\u4EF6\u5931\u8D25"})})}getTempFileURL({fileList:t,maxAge:e}={}){if(!Array.isArray(t)||t.length===0)throw new A({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"});let n={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:t,maxAge:e})};return this.request(this.setupRequest(n)).then(s=>{if(s.success)return{fileList:s.result.fileList.map(o=>({fileID:o.fileID,tempFileURL:o.tempFileURL}))};throw new A({code:"GET_TEMP_FILE_URL_FAILED",message:"\u83B7\u53D6\u4E34\u65F6\u6587\u4EF6\u94FE\u63A5\u5931\u8D25"})})}},eo={init(t){let e=new Zs(t),n={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return n},e.customAuth=e.auth,e}},it=Z(function(t,e){t.exports=se.enc.Hex});function Ln(t="",e={}){let{data:n,functionName:s,method:o,headers:i,signHeaderKeys:a=[],config:c}=e,u=Date.now(),l="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var d=16*Math.random()|0;return(h==="x"?d:3&d|8).toString(16)}),g=Object.assign({},i,{"x-from-app-id":c.spaceAppId,"x-from-env-id":c.spaceId,"x-to-env-id":c.spaceId,"x-from-instance-id":u,"x-from-function-name":s,"x-client-timestamp":u,"x-alipay-source":"client","x-request-id":l,"x-alipay-callid":l,"x-trace-id":l}),p=["x-from-app-id","x-from-env-id","x-to-env-id","x-from-instance-id","x-from-function-name","x-client-timestamp"].concat(a),[v="",y=""]=t.split("?")||[],_=function(h){let d=h.signedHeaders.join(";"),f=h.signedHeaders.map(O=>`${O.toLowerCase()}:${h.headers[O]}
`).join(""),w=$t(h.body).toString(it),m=`${h.method.toUpperCase()}
${h.path}
${h.query}
${f}
${d}
${w}
`,b=$t(m).toString(it),k=`HMAC-SHA256
${h.timestamp}
${b}
`,I=Us(k,h.secretKey).toString(it);return`HMAC-SHA256 Credential=${h.secretId}, SignedHeaders=${d}, Signature=${I}`}({path:v,query:y,method:o,headers:g,timestamp:u,body:JSON.stringify(n),secretId:c.accessKey,secretKey:c.secretKey,signedHeaders:p.sort()});return{url:`${c.endpoint}${t}`,headers:Object.assign({},g,{Authorization:_})}}function Rn({url:t,data:e,method:n="POST",headers:s={}}){return new Promise((o,i)=>{z.request({url:t,method:n,data:e,header:s,dataType:"json",complete:(a={})=>{let c=s["x-trace-id"]||"";if(!a.statusCode||a.statusCode>=400){let{message:u,errMsg:l,trace_id:g}=a.data||{};return i(new A({code:"SYS_ERR",message:u||l||"request:fail",requestId:g||c}))}o({status:a.statusCode,data:a.data,headers:a.header,requestId:c})}})})}function Gt(t,e){let{path:n,data:s,method:o="GET"}=t,{url:i,headers:a}=Ln(n,{functionName:"",data:s,method:o,headers:{"x-alipay-cloud-mode":"oss","x-data-api-type":"oss","x-expire-timestamp":Date.now()+6e4},signHeaderKeys:["x-data-api-type","x-expire-timestamp"],config:e});return Rn({url:i,data:s,method:o,headers:a}).then(c=>{let u=c.data||{};if(!u.success)throw new A({code:c.errCode,message:c.errMsg,requestId:c.requestId});return u.data||{}}).catch(c=>{throw new A({code:c.errCode,message:c.errMsg,requestId:c.requestId})})}function to(t=""){let e=t.trim().replace(/^cloud:\/\//,""),n=e.indexOf("/");if(n<=0)throw new A({code:"INVALID_PARAM",message:"fileID\u4E0D\u5408\u6CD5"});let s=e.substring(0,n),o=e.substring(n+1);return s!==this.config.spaceId&&console.warn("file ".concat(t," does not belong to env ").concat(this.config.spaceId)),o}function no(t=""){return"cloud://".concat(this.config.spaceId,"/").concat(t.replace(/^\/+/,""))}var so=class{constructor(t){if(["spaceId","spaceAppId","accessKey","secretKey"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(`${e} required`)}),t.endpoint){if(typeof t.endpoint!="string")throw new Error("endpoint must be string");if(!/^https:\/\//.test(t.endpoint))throw new Error("endpoint must start with https://");t.endpoint=t.endpoint.replace(/\/$/,"")}this.config=Object.assign({},t,{endpoint:t.endpoint||`https://${t.spaceId}.api-hz.cloudbasefunction.cn`})}callFunction(t){return function(e,n){let{name:s,data:o}=e,i="POST",{url:a,headers:c}=Ln("/functions/invokeFunction",{functionName:s,data:o,method:i,headers:{"x-to-function-name":s},signHeaderKeys:["x-to-function-name"],config:n});return Rn({url:a,data:o,method:i,headers:c}).then(u=>({errCode:0,success:!0,requestId:u.requestId,result:u.data})).catch(u=>{throw new A({code:u.errCode,message:u.errMsg,requestId:u.requestId})})}(t,this.config)}uploadFileToOSS({url:t,filePath:e,fileType:n,formData:s,onUploadProgress:o}){return new Promise((i,a)=>{let c=z.uploadFile({url:t,filePath:e,fileType:n,formData:s,name:"file",success(u){u&&u.statusCode<400?i(u):a(new A({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(u){a(new A({code:u.code||"UPLOAD_FAILED",message:u.message||u.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof o=="function"&&c&&typeof c.onProgressUpdate=="function"&&c.onProgressUpdate(u=>{o({loaded:u.totalBytesSent,total:u.totalBytesExpectedToSend})})})}uploadFile(o){return P(this,arguments,function*({filePath:t,cloudPath:e="",fileType:n="image",onUploadProgress:s}){if(ve(e)!=="string")throw new A({code:"INVALID_PARAM",message:"cloudPath\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u7C7B\u578B"});if(!(e=e.trim()))throw new A({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});if(/:\/\//.test(e))throw new A({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u5408\u6CD5"});let i=yield Gt({path:"/".concat(e.replace(/^\//,""),"?post_url")},this.config),{file_id:a,upload_url:c,form_data:u}=i,l=u&&u.reduce((g,p)=>(g[p.key]=p.value,g),{});return this.uploadFileToOSS({url:c,filePath:t,fileType:n,formData:l,onUploadProgress:s}).then(()=>({fileID:a}))})}getTempFileURL(e){return P(this,arguments,function*({fileList:t}){return new Promise((n,s)=>{(!t||t.length<0)&&s(new A({errCode:"INVALID_PARAM",errMsg:"fileList\u4E0D\u80FD\u4E3A\u7A7A\u6570\u7EC4"})),t.length>50&&s(new A({errCode:"INVALID_PARAM",errMsg:"fileList\u6570\u7EC4\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC750"}));let o=[];for(let i of t){ve(i)!=="string"&&s(new A({errCode:"INVALID_PARAM",errMsg:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"}));let a=to.call(this,i);o.push({file_id:a,expire:600})}Gt({path:"/?download_url",data:{file_list:o},method:"POST"},this.config).then(i=>{let{file_list:a=[]}=i;n({fileList:a.map(c=>({fileID:no.call(this,c.file_id),tempFileURL:c.download_url}))})}).catch(i=>s(i))})})}},oo={init:t=>{t.provider="alipay";let e=new so(t);return e.auth=function(){return{signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!0)}}},e}};function io({data:t}){let e;e=xn();let n=JSON.parse(JSON.stringify(t||{}));if(Object.assign(n,{clientInfo:e}),!n.uniIdToken){let{token:s}=He();s&&(n.uniIdToken=s)}return n}var ro=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"\uFF0C\u4E91\u51FD\u6570[{functionName}]\u5728\u4E91\u7AEF\u4E0D\u5B58\u5728\uFF0C\u8BF7\u68C0\u67E5\u6B64\u4E91\u51FD\u6570\u540D\u79F0\u662F\u5426\u6B63\u786E\u4EE5\u53CA\u8BE5\u4E91\u51FD\u6570\u662F\u5426\u5DF2\u4E0A\u4F20\u5230\u670D\u52A1\u7A7A\u95F4",mode:"append"}],En=/[\\^$.*+?()[\]{}|]/g,ao=RegExp(En.source);function Qt(t,e,n){return t.replace(new RegExp((s=e)&&ao.test(s)?s.replace(En,"\\$&"):s,"g"),n);var s}var co="request",lo="response",uo="both",ho={code:2e4,message:"System error"},fo={code:20101,message:"Invalid client"};function Mn(t){let{errSubject:e,subject:n,errCode:s,errMsg:o,code:i,message:a,cause:c}=t||{};return new A({subject:e||n||"uni-secure-network",code:s||i||ho.code,message:o||a,cause:c})}var gt;function Xt({secretType:t}={}){return t===co||t===lo||t===uo}function Zt({name:t,data:e={}}={}){return t==="DCloud-clientDB"&&e.redirectTo==="encryption"&&e.action==="getAppClientKey"}function po({provider:t,spaceId:e,functionName:n}={}){let{appId:s,uniPlatform:o,osName:i}=kn(),a=o;o==="app"&&(a=i);let c=function({provider:p,spaceId:v}={}){let y=As;if(!y)return{};p=function(h){return h==="tencent"?"tcb":h}(p);let _=y.find(h=>h.provider===p&&h.spaceId===v);return _&&_.config}({provider:t,spaceId:e});if(!c||!c.accessControl||!c.accessControl.enable)return!1;let u=c.accessControl.function||{},l=Object.keys(u);if(l.length===0)return!0;let g=function(p,v){let y,_,h;for(let d=0;d<p.length;d++){let f=p[d];f!==v?f!=="*"?f.split(",").map(w=>w.trim()).indexOf(v)>-1&&(_=f):h=f:y=f}return y||_||h}(l,n);if(!g)return!1;if((u[g]||[]).find((p={})=>p.appId===s&&(p.platform||"").toLowerCase()===a.toLowerCase()))return!0;throw console.error(`\u6B64\u5E94\u7528[appId: ${s}, platform: ${a}]\u4E0D\u5728\u4E91\u7AEF\u914D\u7F6E\u7684\u5141\u8BB8\u8BBF\u95EE\u7684\u5E94\u7528\u5217\u8868\u5185\uFF0C\u53C2\u8003\uFF1Ahttps://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),Mn(fo)}function en({functionName:t,result:e,logPvd:n}){}function go(t){let e=t.callFunction,n=function(s){let o=s.name;s.data=io.call(t,{data:s.data});let i={aliyun:"aliyun",tencent:"tcb",tcb:"tcb",alipay:"alipay"}[this.config.provider],a=Xt(s),c=Zt(s),u=a||c;return e.call(this,s).then(l=>(l.errCode=0,!u&&en.call(this,{functionName:o,result:l,logPvd:i}),Promise.resolve(l)),l=>(!u&&en.call(this,{functionName:o,result:l,logPvd:i}),l&&l.message&&(l.message=function({message:g="",extraInfo:p={},formatter:v=[]}={}){for(let y=0;y<v.length;y++){let{rule:_,content:h,mode:d}=v[y],f=g.match(_);if(!f)continue;let w=h;for(let m=1;m<f.length;m++)w=Qt(w,`{$${m}}`,f[m]);for(let m in p)w=Qt(w,`{${m}}`,p[m]);return d==="replace"?w:g+w}return g}({message:`[${s.name}]: ${l.message}`,formatter:ro,extraInfo:{functionName:o}})),Promise.reject(l)))};t.callFunction=function(s){let{provider:o,spaceId:i}=t.config,a=s.name,c,u;return s.data=s.data||{},c=n,c=c.bind(t),Zt(s)?u=n.call(t,s):Xt(s)?u=new gt({secretType:s.secretType,uniCloudIns:t}).wrapEncryptDataCallFunction(n.bind(t))(s):po({provider:o,spaceId:i,functionName:a})?u=new gt({secretType:s.secretType,uniCloudIns:t}).wrapVerifyClientCallFunction(n.bind(t))(s):u=c(s),Object.defineProperty(u,"result",{get:()=>(console.warn("\u5F53\u524D\u8FD4\u56DE\u7ED3\u679C\u4E3APromise\u7C7B\u578B\uFF0C\u4E0D\u53EF\u76F4\u63A5\u8BBF\u95EE\u5176result\u5C5E\u6027\uFF0C\u8BE6\u60C5\u8BF7\u53C2\u8003\uFF1Ahttps://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),u.then(l=>(typeof UTSJSONObject!="undefined"&&(l.result=new UTSJSONObject(l.result)),l))}}gt=class{constructor(){throw Mn({message:`Platform ${gn} is not enabled, please check whether secure network module is enabled in your manifest.json`})}};var Nn=Symbol("CLIENT_DB_INTERNAL");function ze(t,e){return t.then="DoNotReturnProxyWithAFunctionNamedThen",t._internalType=Nn,t.inspect=null,t.__v_raw=void 0,new Proxy(t,{get(n,s,o){if(s==="_uniClient")return null;if(typeof s=="symbol")return n[s];if(s in n||typeof s!="string"){let i=n[s];return typeof i=="function"?i.bind(n):i}return e.get(n,s,o)}})}function tn(t){return{on:(e,n)=>{t[e]=t[e]||[],t[e].indexOf(n)>-1||t[e].push(n)},off:(e,n)=>{t[e]=t[e]||[];let s=t[e].indexOf(n);s!==-1&&t[e].splice(s,1)}}}var mo=["db.Geo","db.command","command.aggregate"];function Fn(t,e){return mo.indexOf(`${t}.${e}`)>-1}function ce(t){switch(ve(t=bn(t))){case"array":return t.map(e=>ce(e));case"object":return t._internalType===Nn||Object.keys(t).forEach(e=>{t[e]=ce(t[e])}),t;case"regexp":return{$regexp:{source:t.source,flags:t.flags}};case"date":return{$date:t.toISOString()};default:return t}}function ye(t){return t&&t.content&&t.content.$method}var mt=class{constructor(e,n,s){this.content=e,this.prevStage=n||null,this.udb=null,this._database=s}toJSON(){let e=this,n=[e.content];for(;e.prevStage;)e=e.prevStage,n.push(e.content);return{$db:n.reverse().map(s=>({$method:s.$method,$param:ce(s.$param)}))}}toString(){return JSON.stringify(this.toJSON())}getAction(){let e=this.toJSON().$db.find(n=>n.$method==="action");return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter(e=>e.$method!=="action")}}get isAggregate(){let e=this;for(;e;){let n=ye(e),s=ye(e.prevStage);if(n==="aggregate"&&s==="collection"||n==="pipeline")return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if(ye(e)==="command")return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){let n=ye(e),s=ye(e.prevStage);if(n==="aggregate"&&s==="command")return!0;e=e.prevStage}return!1}getNextStageFn(e){let n=this;return function(){return ke({$method:e,$param:ce(Array.from(arguments))},n,n._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL\u7981\u6B62\u4F7F\u7528set\u65B9\u6CD5")}}_send(e,n){let s=this.getAction(),o=this.getCommand();return o.$db.push({$method:e,$param:ce(n)}),this._database._callCloudFunction({action:s,command:o})}};function ke(t,e,n){return ze(new mt(t,e,n),{get(s,o){let i="db";return s&&s.content&&(i=s.content.$method),Fn(i,o)?ke({$method:o},s,n):function(){return ke({$method:o,$param:ce(Array.from(arguments))},s,n)}}})}function rt({path:t,method:e}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...t.map(n=>({$method:n})),{$method:e,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function nn(t,e={}){return ze(new t(e),{get:(n,s)=>Fn("db",s)?ke({$method:s},null,n):function(){return ke({$method:s,$param:ce(Array.from(arguments))},null,n)}})}var We=class extends class{constructor({uniClient:e={},isJQL:n=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=de("_globalUniCloudDatabaseCallback")),n||(this.auth=tn(this._authCallBacks)),this._isJQL=n,Object.assign(this,tn(this._dbCallBacks)),this.env=ze({},{get:(s,o)=>({$env:o})}),this.Geo=ze({},{get:(s,o)=>rt({path:["Geo"],method:o})}),this.serverDate=rt({path:[],method:"serverDate"}),this.RegExp=rt({path:[],method:"RegExp"})}getCloudEnv(e){if(typeof e!="string"||!e.trim())throw new Error("getCloudEnv\u53C2\u6570\u9519\u8BEF");return{$env:e.replace("$cloudEnv_","")}}_callback(e,n){let s=this._dbCallBacks;s[e]&&s[e].forEach(o=>{o(...n)})}_callbackAuth(e,n){let s=this._authCallBacks;s[e]&&s[e].forEach(o=>{o(...n)})}multiSend(){let e=Array.from(arguments),n=e.map(s=>{let o=s.getAction(),i=s.getCommand();if(i.$db[i.$db.length-1].$method!=="getTemp")throw new Error("multiSend\u53EA\u652F\u6301\u5B50\u547D\u4EE4\u5185\u4F7F\u7528getTemp");return{action:o,command:i}});return this._callCloudFunction({multiCommand:n,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:n,multiCommand:s,queryList:o}){function i(p,v){if(s&&o)for(let y=0;y<o.length;y++){let _=o[y];_.udb&&typeof _.udb.setResult=="function"&&(v?_.udb.setResult(v):_.udb.setResult(p.result.dataList[y]))}}let a=this,c=this._isJQL?"databaseForJQL":"database";function u(p){return a._callback("error",[p]),q($(c,"fail"),p).then(()=>q($(c,"complete"),p)).then(()=>(i(null,p),V(X,{type:Bt,content:p}),Promise.reject(p)))}let l=q($(c,"invoke")),g=this._uniClient;return l.then(()=>g.callFunction({name:"DCloud-clientDB",type:xs,data:{action:e,command:n,multiCommand:s}})).then(p=>{let{code:v,message:y,token:_,tokenExpired:h,systemInfo:d=[]}=p.result;if(d)for(let w=0;w<d.length;w++){let{level:m,message:b,detail:k}=d[w],I=console[m==="warn"?"error":m]||console.log,O="[System Info]"+b;k&&(O=`${O}
\u8BE6\u7EC6\u4FE1\u606F\uFF1A${k}`),I(O)}if(v)return u(new A({code:v,message:y,requestId:p.requestId}));p.result.errCode=p.result.errCode||p.result.code,p.result.errMsg=p.result.errMsg||p.result.message,_&&h&&(vn({token:_,tokenExpired:h}),this._callbackAuth("refreshToken",[{token:_,tokenExpired:h}]),this._callback("refreshToken",[{token:_,tokenExpired:h}]),V(Fe,{token:_,tokenExpired:h}));let f=[{prop:"affectedDocs",tips:"affectedDocs\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528inserted/deleted/updated/data.length\u66FF\u4EE3"},{prop:"code",tips:"code\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errCode\u66FF\u4EE3"},{prop:"message",tips:"message\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errMsg\u66FF\u4EE3"}];for(let w=0;w<f.length;w++){let{prop:m,tips:b}=f[w];if(m in p.result){let k=p.result[m];Object.defineProperty(p.result,m,{get:()=>(console.warn(b),k)})}}return function(w){return q($(c,"success"),w).then(()=>q($(c,"complete"),w)).then(()=>{i(w,null);let m=a._parseResult(w);return V(X,{type:Bt,content:m}),Promise.resolve(m)})}(p)},p=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(p.message)&&console.warn("clientDB\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5728web\u63A7\u5236\u53F0\u4FDD\u5B58\u4E00\u6B21schema\u4EE5\u5F00\u542FclientDB"),u(new A({code:p.code||"SYSTEM_ERROR",message:p.message,requestId:p.requestId}))))}},ae="token\u65E0\u6548\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",Un="token\u8FC7\u671F\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",yo={TOKEN_INVALID_TOKEN_EXPIRED:Un,TOKEN_INVALID_INVALID_CLIENTID:ae,TOKEN_INVALID:ae,TOKEN_INVALID_WRONG_TOKEN:ae,TOKEN_INVALID_ANONYMOUS_USER:ae},yt={"uni-id-token-expired":Un,"uni-id-check-token-failed":ae,"uni-id-token-not-exist":ae,"uni-id-check-device-feature-failed":ae};function sn(t,e){let n="";return n=t?`${t}/${e}`:e,n.replace(/^\//,"")}function on(t=[],e=""){let n=[],s=[];return t.forEach(o=>{o.needLogin===!0?n.push(sn(e,o.path)):o.needLogin===!1&&s.push(sn(e,o.path))}),{needLoginPage:n,notNeedLoginPage:s}}function xe(t){return t.split("?")[0].replace(/^\//,"")}function It(){return function(t){let e=t&&t.$page&&t.$page.fullPath||"";return e&&(e.charAt(0)!=="/"&&(e="/"+e),e)}(function(){let t=getCurrentPages();return t[t.length-1]}())}function Bn(){return xe(It())}function _o(t="",e={}){if(!t||!(e&&e.list&&e.list.length))return!1;let n=e.list,s=xe(t);return n.some(o=>o.pagePath===s)}var wo=!!dn.uniIdRouter,{loginPage:Te,routerNeedLogin:bo,resToLogin:vo,needLoginPage:jn,notNeedLoginPage:ko,loginPageInTabBar:xo}=function({pages:t=[],subPackages:e=[],uniIdRouter:n={},tabBar:s={}}=dn){let{loginPage:o,needLogin:i=[],resToLogin:a=!0}=n,{needLoginPage:c,notNeedLoginPage:u}=on(t),{needLoginPage:l,notNeedLoginPage:g}=function(p=[]){let v=[],y=[];return p.forEach(_=>{let{root:h,pages:d=[]}=_,{needLoginPage:f,notNeedLoginPage:w}=on(d,h);v.push(...f),y.push(...w)}),{needLoginPage:v,notNeedLoginPage:y}}(e);return{loginPage:o,routerNeedLogin:i,resToLogin:a,needLoginPage:[...c,...l],notNeedLoginPage:[...u,...g],loginPageInTabBar:_o(o,s)}}();if(jn.indexOf(Te)>-1)throw new Error(`Login page [${Te}] should not be "needLogin", please check your pages.json`);function qn(t){let e=Bn();if(t.charAt(0)==="/")return t;let[n,s]=t.split("?"),o=n.replace(/^\//,"").split("/"),i=e.split("/");i.pop();for(let a=0;a<o.length;a++){let c=o[a];c===".."?i.pop():c!=="."&&i.push(c)}return i[0]===""&&i.shift(),"/"+i.join("/")+(s?"?"+s:"")}function To(t){let e=xe(qn(t));return!(ko.indexOf(e)>-1)&&(jn.indexOf(e)>-1||bo.some(n=>function(s,o){return new RegExp(o).test(s)}(t,n)))}function $n({redirect:t}){let e=xe(t),n=xe(Te);return Bn()!==n&&e!==n}function _t({api:t,redirect:e}={}){if(!e||!$n({redirect:e}))return;let n=function(o,i){return o.charAt(0)!=="/"&&(o="/"+o),i?o.indexOf("?")>-1?o+`&uniIdRedirectUrl=${encodeURIComponent(i)}`:o+`?uniIdRedirectUrl=${encodeURIComponent(i)}`:o}(Te,e);xo?t!=="navigateTo"&&t!=="redirectTo"||(t="switchTab"):t==="switchTab"&&(t="navigateTo");let s={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout(()=>{s[t]({url:n})},0)}function rn({url:t}={}){let e={abortLoginPageJump:!1,autoToLoginPage:!1},n=function(){let{token:s,tokenExpired:o}=He(),i;if(s){if(o<Date.now()){let a="uni-id-token-expired";i={errCode:a,errMsg:yt[a]}}}else{let a="uni-id-check-token-failed";i={errCode:a,errMsg:yt[a]}}return i}();if(To(t)&&n){if(n.uniIdRedirectUrl=t,Se(he).length>0)return setTimeout(()=>{V(he,n)},0),e.abortLoginPageJump=!0,e;e.autoToLoginPage=!0}return e}function So(){(function(){let e=It(),{abortLoginPageJump:n,autoToLoginPage:s}=rn({url:e});n||s&&_t({api:"redirectTo",redirect:e})})();let t=["navigateTo","redirectTo","reLaunch","switchTab"];for(let e=0;e<t.length;e++){let n=t[e];uni.addInterceptor(n,{invoke(s){let{abortLoginPageJump:o,autoToLoginPage:i}=rn({url:s.url});return o?s:i?(_t({api:n,redirect:qn(s.url)}),!1):s}})}}function Co(){this.onResponse(t=>{let{type:e,content:n}=t,s=!1;switch(e){case"cloudobject":s=function(o){if(typeof o!="object")return!1;let{errCode:i}=o||{};return i in yt}(n);break;case"clientdb":s=function(o){if(typeof o!="object")return!1;let{errCode:i}=o||{};return i in yo}(n)}s&&function(o={}){let i=Se(he);_n().then(()=>{let a=It();if(a&&$n({redirect:a}))return i.length>0?V(he,Object.assign({uniIdRedirectUrl:a},o)):void(Te&&_t({api:"navigateTo",redirect:a}))})}(n)})}function Io(t){(function(e){e.onResponse=function(n){Xe(X,n)},e.offResponse=function(n){Ze(X,n)}})(t),function(e){e.onNeedLogin=function(n){Xe(he,n)},e.offNeedLogin=function(n){Ze(he,n)},wo&&(de("_globalUniCloudStatus").needLoginInit||(de("_globalUniCloudStatus").needLoginInit=!0,_n().then(()=>{So.call(e)}),vo&&Co.call(e)))}(t),function(e){e.onRefreshToken=function(n){Xe(Fe,n)},e.offRefreshToken=function(n){Ze(Fe,n)}}(t)}var zn,Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ao=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function Po(){let t=He().token||"",e=t.split(".");if(!t||e.length!==3)return{uid:null,role:[],permission:[],tokenExpired:0};let n;try{n=JSON.parse((s=e[1],decodeURIComponent(zn(s).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(o){throw new Error("\u83B7\u53D6\u5F53\u524D\u7528\u6237\u4FE1\u606F\u51FA\u9519\uFF0C\u8BE6\u7EC6\u9519\u8BEF\u4FE1\u606F\u4E3A\uFF1A"+o.message)}var s;return n.tokenExpired=1e3*n.exp,delete n.exp,delete n.iat,n}zn=typeof atob!="function"?function(t){if(t=String(t).replace(/[\t\n\f\r ]+/g,""),!Ao.test(t))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var e;t+="==".slice(2-(3&t.length));for(var n,s,o="",i=0;i<t.length;)e=Ee.indexOf(t.charAt(i++))<<18|Ee.indexOf(t.charAt(i++))<<12|(n=Ee.indexOf(t.charAt(i++)))<<6|(s=Ee.indexOf(t.charAt(i++))),o+=n===64?String.fromCharCode(e>>16&255):s===64?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return o}:atob;var Do=Z(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});let n="chooseAndUploadFile:ok",s="chooseAndUploadFile:fail";function o(a,c){return a.tempFiles.forEach((u,l)=>{u.name||(u.name=u.path.substring(u.path.lastIndexOf("/")+1)),c&&(u.fileType=c),u.cloudPath=Date.now()+"_"+l+u.name.substring(u.name.lastIndexOf("."))}),a.tempFilePaths||(a.tempFilePaths=a.tempFiles.map(u=>u.path)),a}function i(a,c,{onChooseFile:u,onUploadProgress:l}){return c.then(g=>{if(u){let p=u(g);if(p!==void 0)return Promise.resolve(p).then(v=>v===void 0?g:v)}return g}).then(g=>g===!1?{errMsg:n,tempFilePaths:[],tempFiles:[]}:function(p,v,y=5,_){(v=Object.assign({},v)).errMsg=n;let h=v.tempFiles,d=h.length,f=0;return new Promise(w=>{for(;f<y;)m();function m(){let b=f++;if(b>=d)return void(!h.find(I=>!I.url&&!I.errMsg)&&w(v));let k=h[b];p.uploadFile({provider:k.provider,filePath:k.path,cloudPath:k.cloudPath,fileType:k.fileType,cloudPathAsRealPath:k.cloudPathAsRealPath,onUploadProgress(I){I.index=b,I.tempFile=k,I.tempFilePath=k.path,_&&_(I)}}).then(I=>{k.url=I.fileID,b<d&&m()}).catch(I=>{k.errMsg=I.errMsg||I.message,b<d&&m()})}})}(a,g,5,l))}e.initChooseAndUploadFile=function(a){return function(c={type:"all"}){return c.type==="image"?i(a,function(u){let{count:l,sizeType:g,sourceType:p=["album","camera"],extension:v}=u;return new Promise((y,_)=>{uni.chooseImage({count:l,sizeType:g,sourceType:p,extension:v,success(h){y(o(h,"image"))},fail(h){_({errMsg:h.errMsg.replace("chooseImage:fail",s)})}})})}(c),c):c.type==="video"?i(a,function(u){let{camera:l,compressed:g,maxDuration:p,sourceType:v=["album","camera"],extension:y}=u;return new Promise((_,h)=>{uni.chooseVideo({camera:l,compressed:g,maxDuration:p,sourceType:v,extension:y,success(d){let{tempFilePath:f,duration:w,size:m,height:b,width:k}=d;_(o({errMsg:"chooseVideo:ok",tempFilePaths:[f],tempFiles:[{name:d.tempFile&&d.tempFile.name||"",path:f,size:m,type:d.tempFile&&d.tempFile.type||"",width:k,height:b,duration:w,fileType:"video",cloudPath:""}]},"video"))},fail(d){h({errMsg:d.errMsg.replace("chooseVideo:fail",s)})}})})}(c),c):i(a,function(u){let{count:l,extension:g}=u;return new Promise((p,v)=>{let y=uni.chooseFile;if(typeof wx!="undefined"&&typeof wx.chooseMessageFile=="function"&&(y=wx.chooseMessageFile),typeof y!="function")return v({errMsg:s+" \u8BF7\u6307\u5B9A type \u7C7B\u578B\uFF0C\u8BE5\u5E73\u53F0\u4EC5\u652F\u6301\u9009\u62E9 image \u6216 video\u3002"});y({type:"all",count:l,extension:g,success(_){p(o(_))},fail(_){v({errMsg:_.errMsg.replace("chooseFile:fail",s)})}})})}(c),c)}}}),Oo=ys(Do),Lo="manual";function Wn(t){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{},mixinDatacomError:null}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch(()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach(n=>{e.push(this[n])}),e},(e,n)=>{if(this.loadtime===Lo)return;let s=!1,o=[];for(let i=2;i<e.length;i++)e[i]!==n[i]&&(o.push(e[i]),s=!0);e[0]!==n[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(s,o)})},methods:{onMixinDatacomPropsChange(e,n){},mixinDatacomEasyGet({getone:e=!1,success:n,fail:s}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomError=null,this.mixinDatacomGet().then(o=>{this.mixinDatacomLoading=!1;let{data:i,count:a}=o.result;this.getcount&&(this.mixinDatacomPage.count=a),this.mixinDatacomHasMore=i.length<this.pageSize;let c=e?i.length?i[0]:void 0:i;this.mixinDatacomResData=c,n&&n(c)}).catch(o=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=o,this.mixinDatacomError=o,s&&s(o)}))},mixinDatacomGet(e={}){let n;e=e||{},n=typeof __uniX!="undefined"&&__uniX?t.databaseForJQL(this.spaceInfo):t.database(this.spaceInfo);let s=e.action||this.action;s&&(n=n.action(s));let o=e.collection||this.collection;n=Array.isArray(o)?n.collection(...o):n.collection(o);let i=e.where||this.where;i&&Object.keys(i).length&&(n=n.where(i));let a=e.field||this.field;a&&(n=n.field(a));let c=e.foreignKey||this.foreignKey;c&&(n=n.foreignKey(c));let u=e.groupby||this.groupby;u&&(n=n.groupBy(u));let l=e.groupField||this.groupField;l&&(n=n.groupField(l)),(e.distinct!==void 0?e.distinct:this.distinct)===!0&&(n=n.distinct());let g=e.orderby||this.orderby;g&&(n=n.orderBy(g));let p=e.pageCurrent!==void 0?e.pageCurrent:this.mixinDatacomPage.current,v=e.pageSize!==void 0?e.pageSize:this.mixinDatacomPage.size,y=e.getcount!==void 0?e.getcount:this.getcount,_=e.gettree!==void 0?e.gettree:this.gettree,h=e.gettreepath!==void 0?e.gettreepath:this.gettreepath,d={getCount:y},f={limitLevel:e.limitlevel!==void 0?e.limitlevel:this.limitlevel,startWith:e.startwith!==void 0?e.startwith:this.startwith};return _&&(d.getTree=f),h&&(d.getTreePath=f),n=n.skip(v*(p-1)).limit(v).get(d),n}}}}function Ro(t){return function(e,n={}){n=function(u,l={}){return u.customUI=l.customUI||u.customUI,u.parseSystemError=l.parseSystemError||u.parseSystemError,Object.assign(u.loadingOptions,l.loadingOptions),Object.assign(u.errorOptions,l.errorOptions),typeof l.secretMethods=="object"&&(u.secretMethods=l.secretMethods),u}({customUI:!1,loadingOptions:{title:"\u52A0\u8F7D\u4E2D...",mask:!0},errorOptions:{type:"modal",retry:!1}},n);let{customUI:s,loadingOptions:o,errorOptions:i,parseSystemError:a}=n,c=!s;return new Proxy({},{get(u,l){switch(l){case"toString":return"[object UniCloudObject]";case"toJSON":return{}}return function({fn:g,interceptorName:p,getCallbackArgs:v}={}){return function(...y){return P(this,null,function*(){let _=v?v({params:y}):{},h,d;try{return yield q($(p,"invoke"),L({},_)),h=yield g(...y),yield q($(p,"success"),j(L({},_),{result:h})),h}catch(f){throw d=f,yield q($(p,"fail"),j(L({},_),{error:d})),d}finally{yield q($(p,"complete"),d?j(L({},_),{error:d}):j(L({},_),{result:h}))}})}}({fn:function g(...p){return P(this,null,function*(){let v;c&&uni.showLoading({title:o.title,mask:o.mask});let y={name:e,type:ks,data:{method:l,params:p}};typeof n.secretMethods=="object"&&function(m,b){let k=b.data.method,I=m.secretMethods||{},O=I[k]||I["*"];O&&(b.secretType=O)}(n,y);let _=!1;try{v=yield t.callFunction(y)}catch(m){_=!0,v={result:new A(m)}}let{errSubject:h,errCode:d,errMsg:f,newToken:w}=v.result||{};if(c&&uni.hideLoading(),w&&w.token&&w.tokenExpired&&(vn(w),V(Fe,L({},w))),d){let m=f;if(_&&a&&(m=(yield a({objectName:e,methodName:l,params:p,errSubject:h,errCode:d,errMsg:f})).errMsg||f),c)if(i.type==="toast")uni.showToast({title:m,icon:"none"});else{if(i.type!=="modal")throw new Error(`Invalid errorOptions.type: ${i.type}`);{let{confirm:k}=yield function(){return P(this,arguments,function*({title:I,content:O,showCancel:D,cancelText:R,confirmText:H}={}){return new Promise((F,G)=>{uni.showModal({title:I,content:O,showCancel:D,cancelText:R,confirmText:H,success(B){F(B)},fail(){F({confirm:!1,cancel:!0})}})})})}({title:"\u63D0\u793A",content:m,showCancel:i.retry,cancelText:"\u53D6\u6D88",confirmText:i.retry?"\u91CD\u8BD5":"\u786E\u5B9A"});if(i.retry&&k)return g(...p)}}let b=new A({subject:h,code:d,message:f,requestId:v.requestId});throw b.detail=v.result,V(X,{type:jt,content:b}),b}return V(X,{type:jt,content:v.result}),v.result})},interceptorName:"callObject",getCallbackArgs:function({params:g}={}){return{objectName:e,methodName:l,params:g}}})}})}}function Hn(t){return de("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",t.config.spaceId))}function Eo(){return P(this,arguments,function*({openid:t,callLoginByWeixin:e=!1}={}){throw Hn(this),new Error(`[SecureNetwork] API \`initSecureNetworkByWeixin\` is not supported on platform \`${gn}\``)})}function Mo(t){return P(this,null,function*(){let e=Hn(this);return e.initPromise||(e.initPromise=Eo.call(this,t).then(n=>n).catch(n=>{throw delete e.initPromise,n})),e.initPromise})}function No(t){return function({openid:e,callLoginByWeixin:n=!1}={}){return Mo.call(t,{openid:e,callLoginByWeixin:n})}}function an(t){let e={getSystemInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(n){return new Promise((s,o)=>{e[t](j(L({},n),{success(i){s(i)},fail(i){o(i)}}))})}}var wt=class extends class{constructor(){this._callback={}}addListener(e,n){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(n)}on(e,n){return this.addListener(e,n)}removeListener(e,n){if(!n)throw new Error('The "listener" argument must be of type function. Received undefined');let s=this._callback[e];if(!s)return;let o=function(i,a){for(let c=i.length-1;c>=0;c--)if(i[c]===a)return c;return-1}(s,n);s.splice(o,1)}off(e,n){return this.removeListener(e,n)}removeAllListener(e){delete this._callback[e]}emit(e,...n){let s=this._callback[e];if(s)for(let o=0;o<s.length;o++)s[o](...n)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([an("getSystemInfo")(),an("getPushClientId")()]).then(([{appId:e}={},{cid:n}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!n)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=n,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()},e=>{throw this.emit("error",e),this.close(),e})}open(){return P(this,null,function*(){return this.init()})}_isUniCloudSSE(e){if(e.type!=="receive")return!1;let n=e&&e.data&&e.data.payload;return!(!n||n.channel!=="UNI_CLOUD_SSE"||n.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;let n=e&&e.data&&e.data.payload,{action:s,messageId:o,message:i}=n;this._payloadQueue.push({action:s,messageId:o,message:i}),this._consumMessage()}_consumMessage(){for(;;){let e=this._payloadQueue.find(n=>n.messageId===this._currentMessageId+1);if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){let{action:n,messageId:s,message:o}=e;n==="end"?this._end({messageId:s,message:o}):n==="message"&&this._appendMessage({messageId:s,message:o})}_appendMessage({messageId:e,message:n}={}){this.emit("message",n)}_end({messageId:e,message:n}={}){this.emit("end",n),this.close()}_initMessageListener(){uni.onPushMessage(this._uniPushMessageCallback)}_destroy(){uni.offPushMessage(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}};function Fo(t){t._initPromiseHub||(t._initPromiseHub=new Ne({createPromise:function(){let e=Promise.resolve();var n;n=1,e=new Promise(o=>{setTimeout(()=>{o()},n)});let s=t.auth();return e.then(()=>s.getLoginState()).then(o=>o?Promise.resolve():s.signInAnonymously())}}))}var Uo={tcb:Yt,tencent:Yt,aliyun:Es,private:eo,alipay:oo},J=new class{init(t){let e={},n=Uo[t.provider];if(!n)throw new Error("\u672A\u63D0\u4F9B\u6B63\u786E\u7684provider\u53C2\u6570");return e=n.init(t),Fo(e),go(e),function(s){let o=s.uploadFile;s.uploadFile=function(i){return o.call(this,i)}}(e),function(s){s.database=function(o){if(o&&Object.keys(o).length>0)return s.init(o).database();if(this._database)return this._database;let i=nn(We,{uniClient:s});return this._database=i,i},s.databaseForJQL=function(o){if(o&&Object.keys(o).length>0)return s.init(o).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;let i=nn(We,{uniClient:s,isJQL:!0});return this._databaseForJQL=i,i}}(e),function(s){s.getCurrentUserInfo=Po,s.chooseAndUploadFile=Oo.initChooseAndUploadFile(s),Object.assign(s,{get mixinDatacom(){return Wn(s)}}),s.SSEChannel=wt,s.initSecureNetworkByWeixin=No(s),s.importObject=Ro(s)}(e),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach(s=>{if(!e[s])return;let o=e[s];e[s]=function(){return o.apply(e,Array.from(arguments))},e[s]=function(i,a){return function(c){let u=!1;a==="callFunction"&&(u=(c&&c.type||Mt)!==Mt);let l=a==="callFunction"&&!u,g=this._initPromiseHub.exec();c=c||{};let{success:p,fail:v,complete:y}=wn(c),_=g.then(()=>u?Promise.resolve():q($(a,"invoke"),c)).then(()=>i.call(this,c)).then(h=>u?Promise.resolve(h):q($(a,"success"),h).then(()=>q($(a,"complete"),h)).then(()=>(l&&V(X,{type:Le,content:h}),Promise.resolve(h))),h=>u?Promise.reject(h):q($(a,"fail"),h).then(()=>q($(a,"complete"),h)).then(()=>(V(X,{type:Le,content:h}),Promise.reject(h))));if(!(p||v||y))return _;_.then(h=>{p&&p(h),y&&y(h),l&&V(X,{type:Le,content:h})},h=>{v&&v(h),y&&y(h),l&&V(X,{type:Le,content:h})})}}(e[s],s).bind(e)}),e.init=this.init,e}};(()=>{let t=Ps,e={};if(t&&t.length===1)e=t[0],J=J.init(e),J._isDefault=!0;else{let n=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"],s;s=t&&t.length>0?"\u5E94\u7528\u6709\u591A\u4E2A\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u901A\u8FC7uniCloud.init\u65B9\u6CD5\u6307\u5B9A\u8981\u4F7F\u7528\u7684\u670D\u52A1\u7A7A\u95F4":"\u5E94\u7528\u672A\u5173\u8054\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u5728uniCloud\u76EE\u5F55\u53F3\u952E\u5173\u8054\u670D\u52A1\u7A7A\u95F4",n.forEach(o=>{J[o]=function(){return console.error(s),Promise.reject(new A({code:"SYS_ERR",message:s}))}})}Object.assign(J,{get mixinDatacom(){return Wn(J)}}),Io(J),J.addInterceptor=yn,J.removeInterceptor=Os,J.interceptObject=Ls})();var At=J,Bo=[{font_class:"arrow-down",unicode:"\uE6BE"},{font_class:"arrow-left",unicode:"\uE6BC"},{font_class:"arrow-right",unicode:"\uE6BB"},{font_class:"arrow-up",unicode:"\uE6BD"},{font_class:"auth",unicode:"\uE6AB"},{font_class:"auth-filled",unicode:"\uE6CC"},{font_class:"back",unicode:"\uE6B9"},{font_class:"bars",unicode:"\uE627"},{font_class:"calendar",unicode:"\uE6A0"},{font_class:"calendar-filled",unicode:"\uE6C0"},{font_class:"camera",unicode:"\uE65A"},{font_class:"camera-filled",unicode:"\uE658"},{font_class:"cart",unicode:"\uE631"},{font_class:"cart-filled",unicode:"\uE6D0"},{font_class:"chat",unicode:"\uE65D"},{font_class:"chat-filled",unicode:"\uE659"},{font_class:"chatboxes",unicode:"\uE696"},{font_class:"chatboxes-filled",unicode:"\uE692"},{font_class:"chatbubble",unicode:"\uE697"},{font_class:"chatbubble-filled",unicode:"\uE694"},{font_class:"checkbox",unicode:"\uE62B"},{font_class:"checkbox-filled",unicode:"\uE62C"},{font_class:"checkmarkempty",unicode:"\uE65C"},{font_class:"circle",unicode:"\uE65B"},{font_class:"circle-filled",unicode:"\uE65E"},{font_class:"clear",unicode:"\uE66D"},{font_class:"close",unicode:"\uE673"},{font_class:"closeempty",unicode:"\uE66C"},{font_class:"cloud-download",unicode:"\uE647"},{font_class:"cloud-download-filled",unicode:"\uE646"},{font_class:"cloud-upload",unicode:"\uE645"},{font_class:"cloud-upload-filled",unicode:"\uE648"},{font_class:"color",unicode:"\uE6CF"},{font_class:"color-filled",unicode:"\uE6C9"},{font_class:"compose",unicode:"\uE67F"},{font_class:"contact",unicode:"\uE693"},{font_class:"contact-filled",unicode:"\uE695"},{font_class:"down",unicode:"\uE6B8"},{font_class:"bottom",unicode:"\uE6B8"},{font_class:"download",unicode:"\uE68D"},{font_class:"download-filled",unicode:"\uE681"},{font_class:"email",unicode:"\uE69E"},{font_class:"email-filled",unicode:"\uE69A"},{font_class:"eye",unicode:"\uE651"},{font_class:"eye-filled",unicode:"\uE66A"},{font_class:"eye-slash",unicode:"\uE6B3"},{font_class:"eye-slash-filled",unicode:"\uE6B4"},{font_class:"fire",unicode:"\uE6A1"},{font_class:"fire-filled",unicode:"\uE6C5"},{font_class:"flag",unicode:"\uE65F"},{font_class:"flag-filled",unicode:"\uE660"},{font_class:"folder-add",unicode:"\uE6A9"},{font_class:"folder-add-filled",unicode:"\uE6C8"},{font_class:"font",unicode:"\uE6A3"},{font_class:"forward",unicode:"\uE6BA"},{font_class:"gear",unicode:"\uE664"},{font_class:"gear-filled",unicode:"\uE661"},{font_class:"gift",unicode:"\uE6A4"},{font_class:"gift-filled",unicode:"\uE6C4"},{font_class:"hand-down",unicode:"\uE63D"},{font_class:"hand-down-filled",unicode:"\uE63C"},{font_class:"hand-up",unicode:"\uE63F"},{font_class:"hand-up-filled",unicode:"\uE63E"},{font_class:"headphones",unicode:"\uE630"},{font_class:"heart",unicode:"\uE639"},{font_class:"heart-filled",unicode:"\uE641"},{font_class:"help",unicode:"\uE679"},{font_class:"help-filled",unicode:"\uE674"},{font_class:"home",unicode:"\uE662"},{font_class:"home-filled",unicode:"\uE663"},{font_class:"image",unicode:"\uE670"},{font_class:"image-filled",unicode:"\uE678"},{font_class:"images",unicode:"\uE650"},{font_class:"images-filled",unicode:"\uE64B"},{font_class:"info",unicode:"\uE669"},{font_class:"info-filled",unicode:"\uE649"},{font_class:"left",unicode:"\uE6B7"},{font_class:"link",unicode:"\uE6A5"},{font_class:"list",unicode:"\uE644"},{font_class:"location",unicode:"\uE6AE"},{font_class:"location-filled",unicode:"\uE6AF"},{font_class:"locked",unicode:"\uE66B"},{font_class:"locked-filled",unicode:"\uE668"},{font_class:"loop",unicode:"\uE633"},{font_class:"mail-open",unicode:"\uE643"},{font_class:"mail-open-filled",unicode:"\uE63A"},{font_class:"map",unicode:"\uE667"},{font_class:"map-filled",unicode:"\uE666"},{font_class:"map-pin",unicode:"\uE6AD"},{font_class:"map-pin-ellipse",unicode:"\uE6AC"},{font_class:"medal",unicode:"\uE6A2"},{font_class:"medal-filled",unicode:"\uE6C3"},{font_class:"mic",unicode:"\uE671"},{font_class:"mic-filled",unicode:"\uE677"},{font_class:"micoff",unicode:"\uE67E"},{font_class:"micoff-filled",unicode:"\uE6B0"},{font_class:"minus",unicode:"\uE66F"},{font_class:"minus-filled",unicode:"\uE67D"},{font_class:"more",unicode:"\uE64D"},{font_class:"more-filled",unicode:"\uE64E"},{font_class:"navigate",unicode:"\uE66E"},{font_class:"navigate-filled",unicode:"\uE67A"},{font_class:"notification",unicode:"\uE6A6"},{font_class:"notification-filled",unicode:"\uE6C1"},{font_class:"paperclip",unicode:"\uE652"},{font_class:"paperplane",unicode:"\uE672"},{font_class:"paperplane-filled",unicode:"\uE675"},{font_class:"person",unicode:"\uE699"},{font_class:"person-filled",unicode:"\uE69D"},{font_class:"personadd",unicode:"\uE69F"},{font_class:"personadd-filled",unicode:"\uE698"},{font_class:"personadd-filled-copy",unicode:"\uE6D1"},{font_class:"phone",unicode:"\uE69C"},{font_class:"phone-filled",unicode:"\uE69B"},{font_class:"plus",unicode:"\uE676"},{font_class:"plus-filled",unicode:"\uE6C7"},{font_class:"plusempty",unicode:"\uE67B"},{font_class:"pulldown",unicode:"\uE632"},{font_class:"pyq",unicode:"\uE682"},{font_class:"qq",unicode:"\uE680"},{font_class:"redo",unicode:"\uE64A"},{font_class:"redo-filled",unicode:"\uE655"},{font_class:"refresh",unicode:"\uE657"},{font_class:"refresh-filled",unicode:"\uE656"},{font_class:"refreshempty",unicode:"\uE6BF"},{font_class:"reload",unicode:"\uE6B2"},{font_class:"right",unicode:"\uE6B5"},{font_class:"scan",unicode:"\uE62A"},{font_class:"search",unicode:"\uE654"},{font_class:"settings",unicode:"\uE653"},{font_class:"settings-filled",unicode:"\uE6CE"},{font_class:"shop",unicode:"\uE62F"},{font_class:"shop-filled",unicode:"\uE6CD"},{font_class:"smallcircle",unicode:"\uE67C"},{font_class:"smallcircle-filled",unicode:"\uE665"},{font_class:"sound",unicode:"\uE684"},{font_class:"sound-filled",unicode:"\uE686"},{font_class:"spinner-cycle",unicode:"\uE68A"},{font_class:"staff",unicode:"\uE6A7"},{font_class:"staff-filled",unicode:"\uE6CB"},{font_class:"star",unicode:"\uE688"},{font_class:"star-filled",unicode:"\uE68F"},{font_class:"starhalf",unicode:"\uE683"},{font_class:"trash",unicode:"\uE687"},{font_class:"trash-filled",unicode:"\uE685"},{font_class:"tune",unicode:"\uE6AA"},{font_class:"tune-filled",unicode:"\uE6CA"},{font_class:"undo",unicode:"\uE64F"},{font_class:"undo-filled",unicode:"\uE64C"},{font_class:"up",unicode:"\uE6B6"},{font_class:"top",unicode:"\uE6B6"},{font_class:"upload",unicode:"\uE690"},{font_class:"upload-filled",unicode:"\uE68E"},{font_class:"videocam",unicode:"\uE68C"},{font_class:"videocam-filled",unicode:"\uE689"},{font_class:"vip",unicode:"\uE6A8"},{font_class:"vip-filled",unicode:"\uE6C6"},{font_class:"wallet",unicode:"\uE6B1"},{font_class:"wallet-filled",unicode:"\uE6C2"},{font_class:"weibo",unicode:"\uE68B"},{font_class:"weixin",unicode:"\uE691"}],jo="/assets/uniicons.32e978a5.ttf",qo={"uni-icons":{"":{fontFamily:"uniicons",textDecoration:"none",textAlign:"center"}}},$o=t=>typeof t=="number"||/^[0-9]*$/g.test(t)?t+"px":t,zo=weex.requireModule("dom");zo.addRule("fontFace",{fontFamily:"uniicons",src:"url('"+jo+"')"});var Wo={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:24},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data(){return{icons:Bo}},computed:{unicode(){let t=this.icons.find(e=>e.font_class===this.type);return t?t.unicode:""},iconSize(){return $o(this.size)},styleObj(){return this.fontFamily!==""?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}};function Ho(t,e,n,s,o,i){return(0,Y.openBlock)(),(0,Y.createElementBlock)("u-text",{style:(0,Y.normalizeStyle)(i.styleObj),class:"uni-icons",onClick:e[0]||(e[0]=(...a)=>i._onClick&&i._onClick(...a))},(0,Y.toDisplayString)(i.unicode),5)}var Ae=E(Wo,[["render",Ho],["styles",[qo]]]),Ko=t=>t!==null&&typeof t=="object",Vo=["{","}"],bt=class{constructor(){this._caches=Object.create(null)}interpolate(e,n,s=Vo){if(!n)return[e];let o=this._caches[e];return o||(o=Go(e,s),this._caches[e]=o),Qo(o,n)}},Jo=/^(?:\d)+/,Yo=/^(?:\w)+/;function Go(t,[e,n]){let s=[],o=0,i="";for(;o<t.length;){let a=t[o++];if(a===e){i&&s.push({type:"text",value:i}),i="";let c="";for(a=t[o++];a!==void 0&&a!==n;)c+=a,a=t[o++];let u=a===n,l=Jo.test(c)?"list":u&&Yo.test(c)?"named":"unknown";s.push({value:c,type:l})}else i+=a}return i&&s.push({type:"text",value:i}),s}function Qo(t,e){let n=[],s=0,o=Array.isArray(e)?"list":Ko(e)?"named":"unknown";if(o==="unknown")return n;for(;s<t.length;){let i=t[s];switch(i.type){case"text":n.push(i.value);break;case"list":n.push(e[parseInt(i.value,10)]);break;case"named":o==="named"&&n.push(e[i.value]);break}s++}return n}var at="zh-Hans",cn="zh-Hant",ue="en",Xo="fr",Zo="es",ei=Object.prototype.hasOwnProperty,ln=(t,e)=>ei.call(t,e),ti=new bt;function ni(t,e){return!!e.find(n=>t.indexOf(n)!==-1)}function si(t,e){return e.find(n=>t.indexOf(n)===0)}function un(t,e){if(!t)return;if(t=t.trim().replace(/_/g,"-"),e&&e[t])return t;if(t=t.toLowerCase(),t==="chinese")return at;if(t.indexOf("zh")===0)return t.indexOf("-hans")>-1?at:t.indexOf("-hant")>-1||ni(t,["-tw","-hk","-mo","-cht"])?cn:at;let n=[ue,Xo,Zo];e&&Object.keys(e).length>0&&(n=Object.keys(e));let s=si(t,n);if(s)return s}var vt=class{constructor({locale:e,fallbackLocale:n,messages:s,watcher:o,formater:i}){this.locale=ue,this.fallbackLocale=ue,this.message={},this.messages={},this.watchers=[],n&&(this.fallbackLocale=n),this.formater=i||ti,this.messages=s||{},this.setLocale(e||ue),o&&this.watchLocale(o)}setLocale(e){let n=this.locale;this.locale=un(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],n!==this.locale&&this.watchers.forEach(s=>{s(this.locale,n)})}getLocale(){return this.locale}watchLocale(e){let n=this.watchers.push(e)-1;return()=>{this.watchers.splice(n,1)}}add(e,n,s=!0){let o=this.messages[e];o?s?Object.assign(o,n):Object.keys(n).forEach(i=>{ln(o,i)||(o[i]=n[i])}):this.messages[e]=n}f(e,n,s){return this.formater.interpolate(e,n,s).join("")}t(e,n,s){let o=this.message;return typeof n=="string"?(n=un(n,this.messages),n&&(o=this.messages[n])):s=n,ln(o,e)?this.formater.interpolate(o[e],s).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}};function oi(t,e){t.$watchLocale?t.$watchLocale(n=>{e.setLocale(n)}):t.$watch(()=>t.$locale,n=>{e.setLocale(n)})}function ii(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():ue}function Kn(t,e={},n,s){typeof t!="string"&&([t,e]=[e,t]),typeof t!="string"&&(t=ii()),typeof n!="string"&&(n=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||ue);let o=new vt({locale:t,fallbackLocale:n,messages:e,watcher:s}),i=(a,c)=>{if(typeof getApp!="function")i=function(u,l){return o.t(u,l)};else{let u=!1;i=function(l,g){let p=getApp().$vm;return p&&(p.$locale,u||(u=!0,oi(p,o))),o.t(l,g)}}return i(a,c)};return{i18n:o,f(a,c,u){return o.f(a,c,u)},t(a,c){return i(a,c)},add(a,c,u=!0){return o.add(a,c,u)},watch(a){return o.watchLocale(a)},getLocale(){return o.getLocale()},setLocale(a){return o.setLocale(a)}}}var r=Rt(Ge());var ri={"uni-fab":{"":{position:"fixed",justifyContent:"center",alignItems:"center",zIndex:10,borderRadius:45,boxShadow:"0 1px 5px 2px rgba(0, 0, 0, 0.3)"}},"uni-fab--active":{"":{opacity:1}},"uni-fab--leftBottom":{"":{left:15,bottom:30}},"uni-fab--leftTop":{"":{left:15,top:30}},"uni-fab--rightBottom":{"":{right:15,bottom:30}},"uni-fab--rightTop":{"":{right:15,top:30}},"uni-fab__circle":{"":{position:"fixed",justifyContent:"center",alignItems:"center",width:55,height:55,backgroundColor:"#3c3e49",borderRadius:45,zIndex:11}},"uni-fab__circle--leftBottom":{"":{left:15,bottom:30}},"uni-fab__circle--leftTop":{"":{left:15,top:30}},"uni-fab__circle--rightBottom":{"":{right:15,bottom:30}},"uni-fab__circle--rightTop":{"":{right:15,top:30}},"uni-fab__circle--left":{"":{left:0}},"uni-fab__circle--right":{"":{right:0}},"uni-fab__circle--top":{"":{top:0}},"uni-fab__circle--bottom":{"":{bottom:0}},"uni-fab__plus":{"":{fontWeight:"bold"}},"fab-circle-icon":{"":{transform:"rotate(0deg)",transitionProperty:"transform",transitionDuration:300,fontWeight:"200"}},"uni-fab__plus--active":{"":{transform:"rotate(135deg)"}},"uni-fab__content":{"":{flexDirection:"row",borderRadius:55,overflow:"hidden",transitionProperty:"width,height",transitionDuration:200,width:55,borderColor:"#DDDDDD",borderWidth:"1rpx",borderStyle:"solid"}},"uni-fab__content--other-platform":{"":{borderWidth:0,boxShadow:"0 1px 5px 2px rgba(0, 0, 0, 0.3)"}},"uni-fab__content--left":{"":{justifyContent:"flex-start"}},"uni-fab__content--right":{"":{justifyContent:"flex-end"}},"uni-fab__content--flexDirection":{"":{flexDirection:"column",justifyContent:"flex-end"}},"uni-fab__content--flexDirectionStart":{"":{flexDirection:"column",justifyContent:"flex-start"}},"uni-fab__content--flexDirectionEnd":{"":{flexDirection:"column",justifyContent:"flex-end"}},"uni-fab__item":{"":{flexDirection:"column",justifyContent:"center",alignItems:"center",width:55,height:55,opacity:0,transitionProperty:"opacity",transitionDuration:200}},"uni-fab__item--active":{"":{opacity:1}},"uni-fab__item-image":{"":{width:20,height:20,marginBottom:4}},"uni-fab__item-text":{"":{color:"#FFFFFF",fontSize:12,lineHeight:12,marginTop:2}},"uni-fab__item--first":{"":{width:55}},"@TRANSITION":{"fab-circle-icon":{property:"transform",duration:300},"uni-fab__content":{property:"width,height",duration:200},"uni-fab__item":{property:"opacity",duration:200}}},Jn="other";Jn=uni.getSystemInfoSync().platform;var ai={name:"UniFab",emits:["fabClick","trigger"],props:{pattern:{type:Object,default(){return{}}},horizontal:{type:String,default:"left"},vertical:{type:String,default:"bottom"},direction:{type:String,default:"horizontal"},content:{type:Array,default(){return[]}},show:{type:Boolean,default:!1},popMenu:{type:Boolean,default:!0}},data(){return{fabShow:!1,isShow:!1,isAndroidNvue:Jn==="android",styles:{color:"#3c3e49",selectedColor:"#007AFF",backgroundColor:"#fff",buttonColor:"#007AFF",iconColor:"#fff",icon:"plusempty"}}},computed:{contentWidth(t){return(this.content.length+1)*55+15+"px"},contentWidthMin(){return"55px"},boxWidth(){return this.getPosition(3,"horizontal")},boxHeight(){return this.getPosition(3,"vertical")},leftBottom(){return this.getPosition(0,"left","bottom")},rightBottom(){return this.getPosition(0,"right","bottom")},leftTop(){return this.getPosition(0,"left","top")},rightTop(){return this.getPosition(0,"right","top")},flexDirectionStart(){return this.getPosition(1,"vertical","top")},flexDirectionEnd(){return this.getPosition(1,"vertical","bottom")},horizontalLeft(){return this.getPosition(2,"horizontal","left")},horizontalRight(){return this.getPosition(2,"horizontal","right")},nvueBottom(){return 30+uni.getSystemInfoSync().windowBottom}},watch:{pattern:{handler(t,e){this.styles=Object.assign({},this.styles,t)},deep:!0}},created(){this.isShow=this.show,this.top===0&&(this.fabShow=!0),this.styles=Object.assign({},this.styles,this.pattern)},methods:{_onClick(){this.$emit("fabClick"),this.popMenu&&(this.isShow=!this.isShow)},open(){this.isShow=!0},close(){this.isShow=!1},_onItemClick(t,e){this.isShow&&this.$emit("trigger",{index:t,item:e})},getPosition(t,e,n){return t===0?this.horizontal===e&&this.vertical===n:t===1?this.direction===e&&this.vertical===n:t===2?this.direction===e&&this.horizontal===n:this.isShow&&this.direction===e?this.contentWidth:this.contentWidthMin}}};function ci(t,e,n,s,o,i){let a=N((0,r.resolveDynamicComponent)("uni-icons"),Ae);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"uni-cursor-point",renderWhole:!0},[n.popMenu&&(i.leftBottom||i.rightBottom||i.leftTop||i.rightTop)&&n.content.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:(0,r.normalizeClass)([{"uni-fab--leftBottom":i.leftBottom,"uni-fab--rightBottom":i.rightBottom,"uni-fab--leftTop":i.leftTop,"uni-fab--rightTop":i.rightTop},"uni-fab"]),style:(0,r.normalizeStyle)(i.nvueBottom)},[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([{"uni-fab__content--left":n.horizontal==="left","uni-fab__content--right":n.horizontal==="right","uni-fab__content--flexDirection":n.direction==="vertical","uni-fab__content--flexDirectionStart":i.flexDirectionStart,"uni-fab__content--flexDirectionEnd":i.flexDirectionEnd,"uni-fab__content--other-platform":!o.isAndroidNvue},"uni-fab__content"]),style:(0,r.normalizeStyle)({width:i.boxWidth,height:i.boxHeight,backgroundColor:o.styles.backgroundColor}),elevation:"5"},[i.flexDirectionStart||i.horizontalLeft?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"uni-fab__item uni-fab__item--first"})):(0,r.createCommentVNode)("",!0),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.content,(c,u)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:u,class:(0,r.normalizeClass)([{"uni-fab__item--active":o.isShow},"uni-fab__item"]),onClick:l=>i._onItemClick(u,c)},[(0,r.createElementVNode)("u-image",{src:c.active?c.selectedIconPath:c.iconPath,class:"uni-fab__item-image",mode:"aspectFit"},null,8,["src"]),(0,r.createElementVNode)("u-text",{class:"uni-fab__item-text",style:(0,r.normalizeStyle)({color:c.active?o.styles.selectedColor:o.styles.color})},(0,r.toDisplayString)(c.text),5)],10,["onClick"]))),128)),i.flexDirectionEnd||i.horizontalRight?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"uni-fab__item uni-fab__item--first"})):(0,r.createCommentVNode)("",!0)],6)],6)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([{"uni-fab__circle--leftBottom":i.leftBottom,"uni-fab__circle--rightBottom":i.rightBottom,"uni-fab__circle--leftTop":i.leftTop,"uni-fab__circle--rightTop":i.rightTop,"uni-fab__content--other-platform":!o.isAndroidNvue},"uni-fab__circle uni-fab__plus"]),style:(0,r.normalizeStyle)({"background-color":o.styles.buttonColor,bottom:i.nvueBottom}),onClick:e[0]||(e[0]=(...c)=>i._onClick&&i._onClick(...c))},[(0,r.createVNode)(a,{class:(0,r.normalizeClass)(["fab-circle-icon",{"uni-fab__plus--active":o.isShow&&n.content.length>0}]),type:o.styles.icon,color:o.styles.iconColor,size:"32"},null,8,["type","color","class"])],6)])}var li=E(ai,[["render",ci],["styles",[ri]]]),ui={"@FONT-FACE":[{fontFamily:"iconfont",src:`url('//at.alicdn.com/t/c/font_4526742_m8dyi9stoa.woff2?t=1715328107669') format('woff2'),
		url('//at.alicdn.com/t/c/font_4526742_m8dyi9stoa.woff?t=1715328107669') format('woff'),
		url('//at.alicdn.com/t/c/font_4526742_m8dyi9stoa.ttf?t=1715328107669') format('truetype')`}]},di={__name:"icon",props:["type","color","fontSize","background"],emits:["onClick"],setup(t,{emit:e}){let n={editor:"\uE629",delete:"\uE60F",editor2:"\uE67F",calendar:"\uE89E"};return(s,o)=>{let i=N((0,r.resolveDynamicComponent)("uni-icons"),Ae);return(0,r.openBlock)(),(0,r.createBlock)(i,{fontFamily:"iconfont",size:t.fontSize,color:t.color},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("u-text",null,(0,r.toDisplayString)(n[t.type]||t.type),1)]),_:1},8,["size","color"])}}},ge=E(di,[["styles",[ui]]]),hi={"uni-status-bar":{"":{height:20}}},fi={name:"UniStatusBar",data(){return{statusBarHeight:uni.getSystemInfoSync().statusBarHeight+"px"}}};function pi(t,e,n,s,o,i){return(0,r.openBlock)(),(0,r.createElementBlock)("view",{style:(0,r.normalizeStyle)({height:o.statusBarHeight}),class:"uni-status-bar",renderWhole:!0},[(0,r.renderSlot)(t.$slots,"default")],4)}var gi=E(fi,[["render",pi],["styles",[hi]]]);function ie(t,e=2){for(t+="";t.length<e;)t="0"+t;return t.slice(-e)}var mi={yyyy:t=>ie(t.year,4),yy:t=>ie(t.year),MM:t=>ie(t.month),M:t=>t.month,dd:t=>ie(t.day),d:t=>t.day,hh:t=>ie(t.hour),h:t=>t.hour,mm:t=>ie(t.minute),m:t=>t.minute,ss:t=>ie(t.second),s:t=>t.second,SSS:t=>ie(t.millisecond,3),S:t=>t.millisecond};function Yn(t){if(t instanceof Date)return t;switch(typeof t){case"string":return t.indexOf("T")>-1?new Date(t):new Date(t.replace(/-/g,"/"));default:return new Date(t)}}function yi(t,e="yyyy/MM/dd hh:mm:ss"){if(!t&&t!==0)return"";t=Yn(t);let n={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()},s=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/,o=!0,i=e;for(;o;)o=!1,i=i.replace(s,function(a){return o=!0,mi[a](n)});return i}function _i(t,{locale:e="zh",threshold:n=[6e4,36e5],format:s="yyyy/MM/dd hh:mm:ss"}){if(t==="-")return t;if(!t&&t!==0)return"";let o={zh:{year:"\u5E74",month:"\u6708",day:"\u5929",hour:"\u5C0F\u65F6",minute:"\u5206\u949F",second:"\u79D2",ago:"\u524D",later:"\u540E",justNow:"\u521A\u521A",soon:"\u9A6C\u4E0A",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},i=o[e]||o.zh,a=Yn(t),c=a.getTime()-Date.now(),u=Math.abs(c);if(u<n[0])return c<0?i.justNow:i.soon;if(u>=n[1])return yi(a,s);let l,g,p=i.later;c<0&&(p=i.ago,c=-c);let v=Math.floor(c/1e3),y=Math.floor(v/60),_=Math.floor(y/60),h=Math.floor(_/24),d=Math.floor(h/30),f=Math.floor(d/12);switch(!0){case f>0:l=f,g=i.year;break;case d>0:l=d,g=i.month;break;case h>0:l=h,g=i.day;break;case _>0:l=_,g=i.hour;break;case y>0:l=y,g=i.minute;break;default:l=v,g=i.second;break}return e==="en"&&(l===1?l="a":g+="s"),i.template.replace(/{\s*num\s*}/g,l+"").replace(/{\s*unit\s*}/g,g).replace(/{\s*suffix\s*}/g,p)}var wi={name:"uniDateformat",props:{date:{type:[Object,String,Number],default(){return"-"}},locale:{type:String,default:"zh"},threshold:{type:Array,default(){return[0,0]}},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data(){return{refreshMark:0}},computed:{dateShow(){return this.refreshMark,_i(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler(){this.setAutoRefresh()},immediate:!0}},methods:{refresh(){this.refreshMark++},setAutoRefresh(){clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval(()=>{this.refresh()},parseInt(this.refreshRate)))}}};function bi(t,e,n,s,o,i){return(0,r.openBlock)(),(0,r.createElementBlock)("u-text",null,(0,r.toDisplayString)(i.dateShow),1)}var Gn=E(wi,[["render",bi]]),vi=kt("animation"),Ve=class{constructor(e,n){this.options=e,this.animation=uni.createAnimation(L({},e)),this.currentStepAnimates={},this.next=0,this.$=n}_nvuePushAnimates(e,n){let s=this.currentStepAnimates[this.next],o={};if(s?o=s:o={styles:{},config:{}},Qn.includes(e)){o.styles.transform||(o.styles.transform="");let i="";e==="rotate"&&(i="deg"),o.styles.transform+=`${e}(${n+i}) `}else o.styles[e]=`${n}`;this.currentStepAnimates[this.next]=o}_animateRun(e={},n={}){let s=this.$.$refs.ani.ref;if(s)return new Promise((o,i)=>{vi.transition(s,L({styles:e},n),a=>{o()})})}_nvueNextAnimate(e,n=0,s){let o=e[n];if(o){let{styles:i,config:a}=o;this._animateRun(i,a).then(()=>{n+=1,this._nvueNextAnimate(e,n,s)})}else this.currentStepAnimates={},typeof s=="function"&&s(),this.isEnd=!0}step(e={}){return this.currentStepAnimates[this.next].config=Object.assign({},this.options,e),this.currentStepAnimates[this.next].styles.transformOrigin=this.currentStepAnimates[this.next].config.transformOrigin,this.next++,this}run(e){this.isEnd=!1,this.$.$refs.ani&&this.$.$refs.ani.ref&&(this._nvueNextAnimate(this.currentStepAnimates,0,e),this.next=0)}},Qn=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],ki=["opacity","backgroundColor"],xi=["width","height","left","right","top","bottom"];Qn.concat(ki,xi).forEach(t=>{Ve.prototype[t]=function(...e){return this._nvuePushAnimates(t,e),this}});function Vn(t,e){if(e)return clearTimeout(e.timer),new Ve(t,e)}var Ti={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default(){return{}}},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler(t){t?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let t=j(L({},this.styles),{"transition-duration":this.duration/1e3+"s"}),e="";for(let n in t){let s=this.toLine(n);e+=s+":"+t[n]+";"}return e},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(t={}){t.duration&&(this.durationTime=t.duration),this.animation=Vn(Object.assign(this.config,t),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(t,e={}){if(this.animation){for(let n in t)try{typeof t[n]=="object"?this.animation[n](...t[n]):this.animation[n](t[n])}catch(s){xt("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:148",`\u65B9\u6CD5 ${n} \u4E0D\u5B58\u5728`)}return this.animation.step(e),this}},run(t){this.animation&&this.animation.run(t)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:t,transform:e}=this.styleInit(!1);typeof t!="undefined"&&(this.opacity=t),this.transform=e,this.$nextTick(()=>{this.timer=setTimeout(()=>{this.animation=Vn(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})},20)})},close(t){this.animation&&this.tranfromInit(!0).step().run(()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:n}=this.styleInit(!1);this.opacity=e||1,this.transform=n,this.$emit("change",{detail:this.isShow})})},styleInit(t){let e={transform:""},n=(s,o)=>{o==="fade"?e.opacity=this.animationType(s)[o]:e.transform+=this.animationType(s)[o]+" "};return typeof this.modeClass=="string"?n(t,this.modeClass):this.modeClass.forEach(s=>{n(t,s)}),e},tranfromInit(t){let e=(n,s)=>{let o=null;s==="fade"?o=n?0:1:(o=n?"-100%":"0",s==="zoom-in"&&(o=n?.8:1),s==="zoom-out"&&(o=n?1.2:1),s==="slide-right"&&(o=n?"100%":"0"),s==="slide-bottom"&&(o=n?"100%":"0")),this.animation[this.animationMode()[s]](o)};return typeof this.modeClass=="string"?e(t,this.modeClass):this.modeClass.forEach(n=>{e(t,n)}),this.animation},animationType(t){return{fade:t?0:1,"slide-top":`translateY(${t?"0":"-100%"})`,"slide-right":`translateX(${t?"0":"100%"})`,"slide-bottom":`translateY(${t?"0":"100%"})`,"slide-left":`translateX(${t?"0":"-100%"})`,"zoom-in":`scaleX(${t?1:.8}) scaleY(${t?1:.8})`,"zoom-out":`scaleX(${t?1:1.2}) scaleY(${t?1:1.2})`}},animationMode(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}}};function Si(t,e,n,s,o,i){return o.isShow?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,ref:"ani",animation:o.animationData,class:(0,r.normalizeClass)(n.customClass),style:(0,r.normalizeStyle)(i.transformStyles),onClick:e[0]||(e[0]=(...a)=>i.onClick&&i.onClick(...a)),renderWhole:!0},[(0,r.renderSlot)(t.$slots,"default")],14,["animation"])):(0,r.createCommentVNode)("",!0)}var Xn=E(Ti,[["render",Si]]),Ci={data(){return{}},created(){this.popup=this.getParent()},methods:{getParent(t="uniPopup"){let e=this.$parent,n=e.$options.name;for(;n!==t;){if(e=e.$parent,!e)return!1;n=e.$options.name}return e}}},Ii={"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"},Ai={"uni-popup.cancel":"\u53D6\u6D88","uni-popup.ok":"\u786E\u5B9A","uni-popup.placeholder":"\u8BF7\u8F93\u5165","uni-popup.title":"\u63D0\u793A","uni-popup.shareTitle":"\u5206\u4EAB\u5230"},Pi={"uni-popup.cancel":"\u53D6\u6D88","uni-popup.ok":"\u78BA\u5B9A","uni-popup.placeholder":"\u8ACB\u8F38\u5165","uni-popup.title":"\u63D0\u793A","uni-popup.shareTitle":"\u5206\u4EAB\u5230"},Di={en:Ii,"zh-Hans":Ai,"zh-Hant":Pi},Oi={"uni-popup-dialog":{"":{width:300,borderRadius:11,backgroundColor:"#ffffff"}},"uni-dialog-title":{"":{flexDirection:"row",justifyContent:"center",paddingTop:25}},"uni-dialog-title-text":{"":{fontSize:16,fontWeight:"500"}},"uni-dialog-content":{"":{flexDirection:"row",justifyContent:"center",alignItems:"center",paddingTop:20,paddingRight:20,paddingBottom:20,paddingLeft:20}},"uni-dialog-content-text":{"":{fontSize:14,color:"#6C6C6C"}},"uni-dialog-button-group":{"":{flexDirection:"row",borderTopColor:"#f5f5f5",borderTopStyle:"solid",borderTopWidth:1}},"uni-dialog-button":{"":{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:45}},"uni-border-left":{"":{borderLeftColor:"#f0f0f0",borderLeftStyle:"solid",borderLeftWidth:1}},"uni-dialog-button-text":{"":{fontSize:16,color:"#333333"}},"uni-button-color":{"":{color:"#007aff"}},"uni-dialog-input":{"":{flex:1,fontSize:14,borderWidth:1,borderStyle:"solid",borderColor:"#eeeeee",height:40,paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10,borderRadius:5,color:"#555555"}},"uni-popup__success":{"":{color:"#4cd964"}},"uni-popup__warn":{"":{color:"#f0ad4e"}},"uni-popup__error":{"":{color:"#dd524d"}},"uni-popup__info":{"":{color:"#909399"}}},{t:Ke}=Kn(Di),Li={name:"uniPopupDialog",mixins:[Ci],emits:["confirm","close","update:modelValue","input"],props:{inputType:{type:String,default:"text"},showClose:{type:Boolean,default:!0},modelValue:{type:[Number,String],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""},maxlength:{type:Number,default:-1},focus:{type:Boolean,default:!0}},data(){return{dialogType:"error",val:""}},computed:{okText(){return this.confirmText||Ke("uni-popup.ok")},closeText(){return this.cancelText||Ke("uni-popup.cancel")},placeholderText(){return this.placeholder||Ke("uni-popup.placeholder")},titleText(){return this.title||Ke("uni-popup.title")}},watch:{type(t){this.dialogType=t},mode(t){t==="input"&&(this.dialogType="info")},value(t){this.maxlength!=-1&&this.mode==="input"?this.val=t.slice(0,this.maxlength):this.val=t},val(t){this.$emit("update:modelValue",t)}},created(){this.popup.disableMask(),this.mode==="input"?(this.dialogType="info",this.val=this.value,this.val=this.modelValue):this.dialogType=this.type},methods:{onOk(){this.mode==="input"?this.$emit("confirm",this.val):this.$emit("confirm"),!this.beforeClose&&this.popup.close()},closeDialog(){this.$emit("close"),!this.beforeClose&&this.popup.close()},close(){this.popup.close()}}};function Ri(t,e,n,s,o,i){return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"uni-popup-dialog",renderWhole:!0},[(0,r.createElementVNode)("view",{class:"uni-dialog-title"},[(0,r.createElementVNode)("u-text",{class:(0,r.normalizeClass)(["uni-dialog-title-text",["uni-popup__"+o.dialogType]])},(0,r.toDisplayString)(i.titleText),3)]),n.mode==="base"?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"uni-dialog-content"},[(0,r.renderSlot)(t.$slots,"default",{},()=>[(0,r.createElementVNode)("u-text",{class:"uni-dialog-content-text"},(0,r.toDisplayString)(n.content),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"uni-dialog-content"},[(0,r.renderSlot)(t.$slots,"default",{},()=>[(0,r.createElementVNode)("u-input",{class:"uni-dialog-input",maxlength:n.maxlength,modelValue:o.val,onInput:e[0]||(e[0]=a=>o.val=a.detail.value),type:n.inputType,placeholder:i.placeholderText,focus:n.focus},null,40,["maxlength","modelValue","type","placeholder","focus"])])])),(0,r.createElementVNode)("view",{class:"uni-dialog-button-group"},[n.showClose?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"uni-dialog-button",onClick:e[1]||(e[1]=(...a)=>i.closeDialog&&i.closeDialog(...a))},[(0,r.createElementVNode)("u-text",{class:"uni-dialog-button-text"},(0,r.toDisplayString)(i.closeText),1)])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(["uni-dialog-button",n.showClose?"uni-border-left":""]),onClick:e[2]||(e[2]=(...a)=>i.onOk&&i.onOk(...a))},[(0,r.createElementVNode)("u-text",{class:"uni-dialog-button-text uni-button-color"},(0,r.toDisplayString)(i.okText),1)],2)])])}var Zn=E(Li,[["render",Ri],["styles",[Oi]]]),Ei={"uni-popup":{"":{position:"fixed"},".top":{top:0},".left":{top:0},".right":{top:0}},"uni-popup__wrapper":{".uni-popup ":{position:"relative"},".uni-popup .left":{paddingTop:0,flex:1},".uni-popup .right":{paddingTop:0,flex:1}},"fixforpc-top":{"":{top:0}}},Mi={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},borderRadius:{type:String}},watch:{type:{handler:function(t){this.config[t]&&this[this.config[t]](!0)},immediate:!0},isDesktop:{handler:function(t){this.config[t]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(t){this.mkclick=t},immediate:!0},isMaskClick:{handler:function(t){this.mkclick=t},immediate:!0},showPopup(t){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{backgroundColor:"transparent",borderRadius:this.borderRadius||"0",position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{getStyles(){let t={backgroundColor:this.bg};return this.borderRadius,t=Object.assign(t,{borderRadius:this.borderRadius}),t},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return this.backgroundColor===""||this.backgroundColor==="none"?"transparent":this.backgroundColor}},mounted(){(()=>{let{windowWidth:e,windowHeight:n,windowTop:s,safeArea:o,screenHeight:i,safeAreaInsets:a}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=n+(s||0),o&&this.safeArea?this.safeAreaInsets=a.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},activated(){this.setH5Visible(!this.showPopup)},deactivated(){this.setH5Visible(!0)},created(){this.isMaskClick===null&&this.maskClick===null?this.mkclick=!0:this.mkclick=this.isMaskClick!==null?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(t=!0){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(t){this.clearPropagation=!0},open(t){if(this.showPopup)return;if(t&&["top","center","bottom","left","right","message","dialog","share"].indexOf(t)!==-1||(t=this.type),!this.config[t]){xt("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:298","\u7F3A\u5C11\u7C7B\u578B\uFF1A",t);return}this[this.config[t]](),this.$emit("change",{show:!0,type:t})},close(t){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){if(this.clearPropagation){this.clearPropagation=!1;return}this.$emit("maskClick"),this.mkclick&&this.close()},top(t){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},!t&&(this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&this.type==="message"&&this.messageChild.timerClose()}))},bottom(t){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},!t&&(this.showPopup=!0,this.showTrans=!0)},center(t){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center",borderRadius:this.borderRadius||"0"},!t&&(this.showPopup=!0,this.showTrans=!0)},left(t){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},!t&&(this.showPopup=!0,this.showTrans=!0)},right(t){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},!t&&(this.showPopup=!0,this.showTrans=!0)}}};function Ni(t,e,n,s,o,i){let a=N((0,r.resolveDynamicComponent)("uni-transition"),Xn);return o.showPopup?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:(0,r.normalizeClass)(["uni-popup",[o.popupstyle,i.isDesktop?"fixforpc-z-index":""]]),renderWhole:!0},[(0,r.createElementVNode)("view",{onTouchstart:e[1]||(e[1]=(...c)=>i.touchstart&&i.touchstart(...c))},[o.maskShow?((0,r.openBlock)(),(0,r.createBlock)(a,{key:"1",name:"mask","mode-class":"fade",styles:o.maskClass,duration:o.duration,show:o.showTrans,onClick:i.onTap},null,8,["styles","duration","show","onClick"])):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(a,{key:"2","mode-class":o.ani,name:"content",styles:o.transClass,duration:o.duration,show:o.showTrans,onClick:i.onTap},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(["uni-popup__wrapper",[o.popupstyle]]),style:(0,r.normalizeStyle)(i.getStyles),onClick:e[0]||(e[0]=(...c)=>i.clear&&i.clear(...c))},[(0,r.renderSlot)(t.$slots,"default")],6)]),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],2)):(0,r.createCommentVNode)("",!0)}var es=E(Mi,[["render",Ni],["styles",[Ei]]]),Fi={"time-line-container":{"":{position:"relative",fontSize:14}},"time-line-header":{"":{display:"flex",alignItems:"center",flexDirection:"row",marginTop:20,justifyContent:"center",color:"#6e6c6c",fontSize:12}},"time-line-item":{"":{display:"flex",alignItems:"center",flexDirection:"row",position:"relative",justifyContent:"flex-end",marginTop:20,marginBottom:10,height:20},".time-line-first-item":{marginTop:15}},"time-line-date":{".time-line-header ":{width:100,textAlign:"right"}},"time-line-circle":{".time-line-header ":{marginTop:0,marginRight:10,marginBottom:0,marginLeft:10,width:8,height:8,borderRadius:50,backgroundColor:"#999999"}},"time-line-total-price":{".time-line-header ":{width:100}},"time-line-ico":{".time-line-item ":{position:"absolute",top:50,left:50,transform:"translate(-50%, -50%)",backgroundColor:"#ffffff"}},"time-line-title":{".time-line-item ":{marginTop:0,marginRight:10,marginBottom:0,marginLeft:10}},"time-line-price":{".time-line-item ":{color:"#6e6c6c"}},"time-line-item-content":{"":{flexDirection:"row"},".time-line-item-income ":{flexDirection:"row-reverse"}},"time-line-item-desc":{"":{marginLeft:10,color:"#6e6c6c"}},"time-line-item-income":{"":{justifyContent:"flex-start"}}},Ui=Object.assign({inheritAttrs:!1},{__name:"Item",props:["data"],emits:["onEdit","onDelete"],setup(t,{emit:e}){let n=e,s=(0,r.ref)(null),o=(0,r.ref)(),i=(0,r.ref)(),a=g=>{o.value=g===o.value?"":g},c=g=>{if(o.value="",!g){s.value.close(),i.value="";return}s.value.open(),i.value=g},u=()=>{i.value&&(c(),n("onDelete",i.value))},l=g=>{n("onEdit",g),o.value=""};return(g,p)=>{let v=N((0,r.resolveDynamicComponent)("uni-dateformat"),Gn),y=N((0,r.resolveDynamicComponent)("uni-transition"),Xn),_=N((0,r.resolveDynamicComponent)("uni-popup-dialog"),Zn),h=N((0,r.resolveDynamicComponent)("uni-popup"),es);return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createElementVNode)("view",{class:"time-line-container"},[(0,r.createElementVNode)("view",{class:"time-line-header"},[(0,r.createVNode)(v,{class:"time-line-date",date:t.data.date,format:"dd\u65E5"},null,8,["date"]),(0,r.createElementVNode)("view",{class:"time-line-circle"}),(0,r.createElementVNode)("u-text",{class:"time-line-total-price"},(0,r.toDisplayString)(t.data.price.toFixed(2)),1)]),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(t.data.children,(d,f)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{class:(0,r.normalizeClass)(["time-line-item",{"time-line-first-item":f===0,"time-line-has-desc":!!d.desc,"time-line-item-income":d.classify.billType==="income"}]),key:d._id},[(0,r.createVNode)(ge,{class:"time-line-ico",fontSize:"20",type:d.classify.ico,color:d.classify.background,onClick:w=>a(f)},null,8,["type","color","onClick"]),(0,r.createVNode)(y,{"mode-class":["fade","slide-left"],show:o.value===f,style:{position:"absolute",right:"36%",width:"24px",height:"24px"}},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(ge,{class:"time-line-ico",fontSize:"24",type:"editor",color:"#0070ff",onClick:w=>l(d)},null,8,["onClick"])]),_:2},1032,["show"]),(0,r.createVNode)(y,{"mode-class":["fade","slide-right"],show:o.value===f,style:{position:"absolute",left:"34%",width:"24px",height:"24px"}},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(ge,{class:"time-line-ico",fontSize:"24",type:"delete",color:"#ef0505",onClick:w=>c(d._id)},null,8,["onClick"])]),_:2},1032,["show"]),(0,r.createElementVNode)("view",{class:"time-line-inner",onClick:w=>l(d)},[o.value!==f?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("view",{class:"time-line-item-content"},[(0,r.createElementVNode)("u-text",{class:"time-line-title"},(0,r.toDisplayString)(d.title),1),(0,r.createElementVNode)("u-text",{class:"time-line-price"},(0,r.toDisplayString)(d.price.toFixed(2)),1)]),d.desc?((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:0,class:"time-line-item-desc"},(0,r.toDisplayString)(d.desc),1)):(0,r.createCommentVNode)("",!0)],64)):(0,r.createCommentVNode)("",!0)],8,["onClick"])],2))),128))]),(0,r.createVNode)(h,{ref_key:"deleteRef",ref:s,type:"dialog"},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(_,{type:"info",title:"\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A",onConfirm:u})]),_:1},512)],64)}}}),Bi=E(Ui,[["styles",[Fi]]]),ji={container:{"":{paddingTop:10,paddingRight:10,paddingBottom:10,paddingLeft:10,flexDirection:"row",justifyContent:"space-between",fontSize:14,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"#999999"}},title:{"":{color:"#999999"},".balance-profit ":{color:"#0070ff"},".balance-deficit ":{color:"#ef0505"}},balance:{"":{textAlign:"center"}},expense:{"":{textAlign:"right"}},price:{"":{fontWeight:"700"}},"balance-profit":{"":{color:"#0070ff"}},"balance-deficit":{"":{color:"#ef0505"}}},qi={__name:"Total",props:["income","expense"],setup(t){return(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"container",renderWhole:!0},[(0,r.createElementVNode)("view",{class:"income"},[(0,r.createElementVNode)("u-text",{class:"title"},"\u6708\u6536\u5165"),(0,r.createElementVNode)("u-text",{class:"price"},(0,r.toDisplayString)(t.income.toFixed(2)),1)]),(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(["balance",t.income-t.expense>0?"balance-profit":"balance-deficit"])},[(0,r.createElementVNode)("u-text",{class:"title"},"\u6708\u7ED3\u4F59"),(0,r.createElementVNode)("u-text",{class:"price"},(0,r.toDisplayString)((t.income-t.expense).toFixed(2)),1)],2),(0,r.createElementVNode)("view",{class:"expense"},[(0,r.createElementVNode)("u-text",{class:"title"},"\u6708\u652F\u51FA"),(0,r.createElementVNode)("u-text",{class:"price"},(0,r.toDisplayString)(t.expense.toFixed(2)),1)])]))}},$i=E(qi,[["styles",[ji]]]),zi={container:{"":{flexDirection:"row",justifyContent:"center",alignItems:"center",height:160}},"icon-arrows":{"":{width:35,height:35,borderWidth:1,borderStyle:"solid",borderColor:"#ffffff",borderRadius:50}},"date-box":{"":{marginTop:0,marginRight:40,marginBottom:0,marginLeft:40,width:70,alignItems:"center",color:"#ffffff"}},month:{"":{fontSize:30}}},Wi={__name:"SelectData",props:["date"],emits:["onChange"],setup(t,{emit:e}){let n=e,s=o=>{n("onChange",o)};return(o,i)=>{let a=N((0,r.resolveDynamicComponent)("uni-icons"),Ae),c=N((0,r.resolveDynamicComponent)("uni-dateformat"),Gn);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"container",renderWhole:!0},[(0,r.createVNode)(a,{type:"left",size:"30",color:"#fff",class:"icon-arrows",onClick:i[0]||(i[0]=u=>s(-1))}),(0,r.createElementVNode)("view",{class:"date-box"},[(0,r.createVNode)(c,{class:"month",date:t.date,format:"M\u6708"},null,8,["date"]),(0,r.createVNode)(c,{date:t.date,format:"yyyy\u5E74"},null,8,["date"])]),(0,r.createVNode)(a,{type:"right",size:"30",color:"#fff",class:"icon-arrows",onClick:i[1]||(i[1]=u=>s(1))})])}}},Hi=E(Wi,[["styles",[zi]]]),Ki={"segmented-control":{"":{flexDirection:"row",height:36,overflow:"hidden"}},"segmented-control__item":{"":{position:"relative",flex:1,justifyContent:"center",alignItems:"center"}},"segmented-control__item--button":{"":{borderStyle:"solid",borderTopWidth:1,borderBottomWidth:1,borderRightWidth:1,borderLeftWidth:0}},"segmented-control__item--button--first":{"":{borderLeftWidth:1,borderTopLeftRadius:5,borderBottomLeftRadius:5}},"segmented-control__item--button--last":{"":{borderTopRightRadius:5,borderBottomRightRadius:5}},"segmented-control__item--text":{"":{borderBottomStyle:"solid",borderBottomWidth:2,paddingTop:6,paddingRight:0,paddingBottom:6,paddingLeft:0}},"segmented-control__text":{"":{fontSize:14,lineHeight:20,textAlign:"center"}}},Vi={name:"UniSegmentedControl",emits:["clickItem"],props:{current:{type:Number,default:0},values:{type:Array,default(){return[]}},activeColor:{type:String,default:"#2979FF"},styleType:{type:String,default:"button"}},data(){return{currentIndex:0}},watch:{current(t){t!==this.currentIndex&&(this.currentIndex=t)}},created(){this.currentIndex=this.current},methods:{_onClick(t){this.currentIndex!==t&&(this.currentIndex=t,this.$emit("clickItem",{currentIndex:t}))}}};function Ji(t,e,n,s,o,i){return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:(0,r.normalizeClass)([[n.styleType==="text"?"segmented-control--text":"segmented-control--button"],"segmented-control"]),style:(0,r.normalizeStyle)({borderColor:n.styleType==="text"?"":n.activeColor}),renderWhole:!0},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.values,(a,c)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{class:(0,r.normalizeClass)([[n.styleType==="text"?"":"segmented-control__item--button",c===o.currentIndex&&n.styleType==="button"?"segmented-control__item--button--active":"",c===0&&n.styleType==="button"?"segmented-control__item--button--first":"",c===n.values.length-1&&n.styleType==="button"?"segmented-control__item--button--last":""],"segmented-control__item"]),key:c,style:(0,r.normalizeStyle)({backgroundColor:c===o.currentIndex&&n.styleType==="button"?n.activeColor:"",borderColor:c===o.currentIndex&&n.styleType==="text"||n.styleType==="button"?n.activeColor:"transparent"}),onClick:u=>i._onClick(c)},[(0,r.createElementVNode)("view",null,[(0,r.createElementVNode)("u-text",{style:(0,r.normalizeStyle)({color:c===o.currentIndex?n.styleType==="text"?n.activeColor:"#fff":n.styleType==="text"?"#000":n.activeColor}),class:(0,r.normalizeClass)(["segmented-control__text",n.styleType==="text"&&c===o.currentIndex?"segmented-control__item--text":""])},(0,r.toDisplayString)(a),7)])],14,["onClick"]))),128))],6)}var Yi=E(Vi,[["render",Ji],["styles",[Ki]]]),Gi={"uni-grid-item__box":{"":{position:"relative",flex:1,flexDirection:"column"}},"uni-grid-item--border":{"":{position:"relative",borderBottomColor:"#D2D2D2",borderBottomStyle:"solid",borderBottomWidth:.5,borderRightColor:"#D2D2D2",borderRightStyle:"solid",borderRightWidth:.5}},"uni-grid-item--border-top":{"":{position:"relative",borderTopColor:"#D2D2D2",borderTopStyle:"solid",borderTopWidth:.5}},"uni-highlight":{"":{"backgroundColor:active":"#f1f1f1"}}},Qi={name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data(){return{column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}},created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=this.hor===0?this.grid.hor:this.hor,this.left=this.ver===0?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach((t,e)=>{t===this&&this.grid.children.splice(e,1)})},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}};function Xi(t,e,n,s,o,i){return o.width?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,style:(0,r.normalizeStyle)("width:"+o.width+";"+(o.square?"height:"+o.width:"")),class:"uni-grid-item",renderWhole:!0},[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([{"uni-grid-item--border":o.showBorder,"uni-grid-item--border-top":o.showBorder&&n.index<o.column,"uni-highlight":o.highlight},"uni-grid-item__box"]),style:(0,r.normalizeStyle)({"border-right-color":o.borderColor,"border-bottom-color":o.borderColor,"border-top-color":o.borderColor}),onClick:e[0]||(e[0]=(...a)=>i._onClick&&i._onClick(...a))},[(0,r.renderSlot)(t.$slots,"default")],6)],4)):(0,r.createCommentVNode)("",!0)}var Zi=E(Qi,[["render",Xi],["styles",[Gi]]]),er={"uni-grid-wrap":{"":{flex:1,flexDirection:"column"}},"uni-grid":{"":{flexDirection:"row",flexWrap:"wrap"}},"uni-grid--border":{"":{position:"relative",borderLeftColor:"#D2D2D2",borderLeftStyle:"solid",borderLeftWidth:.5}}},tr=kt("dom"),nr={name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data(){return{elId:`Uni_${Math.ceil(Math.random()*1e6).toString(36)}`,width:0}},created(){this.children=[]},mounted(){this.$nextTick(()=>{this.init()})},methods:{init(){setTimeout(()=>{this._getSize(t=>{this.children.forEach((e,n)=>{e.width=t})})},50)},change(t){this.$emit("change",t)},_getSize(t){tr.getComponentRect(this.$refs["uni-grid"],e=>{this.width=parseInt((e.size.width-1)/this.column)+"px",t(this.width)})}}};function sr(t,e,n,s,o,i){return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"uni-grid-wrap",renderWhole:!0},[(0,r.createElementVNode)("view",{id:o.elId,ref:"uni-grid",class:(0,r.normalizeClass)(["uni-grid",{"uni-grid--border":n.showBorder}]),style:(0,r.normalizeStyle)({"border-left-color":n.borderColor})},[(0,r.renderSlot)(t.$slots,"default")],14,["id"])])}var or=E(nr,[["render",sr],["styles",[er]]]),ir={container:{"":{position:"fixed",top:0,left:0,width:100,height:100,backgroundColor:"#ffffff",zIndex:99}},deleteIcon:{".container ":{position:"absolute",top:4,left:4,zIndex:99}}},rr={__name:"index",props:["visible"],emits:["onCancel"],setup(t,{emit:e}){let n=e,s=()=>{n("onCancel")};return(o,i)=>{let a=N((0,r.resolveDynamicComponent)("uni-icons"),Ae);return t.visible?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"container",renderWhole:!0},[(0,r.createVNode)(a,{type:"closeempty",class:"deleteIcon",color:"#999",onClick:s}),(0,r.renderSlot)(o.$slots,"default")])):(0,r.createCommentVNode)("",!0)}}},ar=E(rr,[["styles",[ir]]]),cr={countRow:{"":{display:"flex",flexDirection:"row",borderTopWidth:1,borderTopStyle:"solid",borderTopColor:"#ffffff"}},countItem:{"":{flexBasis:25}},count:{"":{height:40,lineHeight:40,textAlign:"center"}},countOk:{"":{display:"flex",alignItems:"center",justifyContent:"center",height:100}}},lr={__name:"calculator",props:["price"],emits:["onOk","onChange"],setup(t,{emit:e}){let n=e,s=[0],o=0,i=1,a=c=>{if(c==="\u6E05\u96F6"){n("onChange",0),s=[0],o=0;return}if(c==="OK"){n("onOk",o+(s.length?(s.join("")-0)*i:0)),s=[],o=0;return}if(["+","-"].includes(c)){o+=(s.join("")-0)*i,n("onChange",o),s=[],i=c==="-"?-1:1;return}if(typeof c=="number"){let u=s.findIndex(l=>l===".");if(u!==-1&&s.length-u===3)return;s.push(c)}c==="."&&s[s.length-1]!=="."&&s.push(c),n("onChange",s.join("")-0)};return(c,u)=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createElementVNode)("view",{class:"countRow"},[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)([1,2,3,"+"],l=>(0,r.createElementVNode)("view",{class:"countItem",key:l,onClick:g=>a(l)},[(0,r.createElementVNode)("view",{class:"count"},[(0,r.createElementVNode)("u-text",null,(0,r.toDisplayString)(l),1)])],8,["onClick"])),64))]),(0,r.createElementVNode)("view",{class:"countRow"},[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)([4,5,6,"-"],l=>(0,r.createElementVNode)("view",{class:"countItem",key:l,onClick:g=>a(l)},[(0,r.createElementVNode)("view",{class:"count"},[(0,r.createElementVNode)("u-text",null,(0,r.toDisplayString)(l),1)])],8,["onClick"])),64))]),(0,r.createElementVNode)("view",{class:"countRow"},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)([[7,"\u6E05\u96F6"],[8,0],[9,"."],"OK"],(l,g)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"countItem",key:l},[g<3?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0},[(0,r.createElementVNode)("view",{class:"count",onClick:p=>a(l[0])},[(0,r.createElementVNode)("u-text",null,(0,r.toDisplayString)(l[0]),1)],8,["onClick"]),(0,r.createElementVNode)("view",{class:"count",onClick:p=>a(l[1])},[(0,r.createElementVNode)("u-text",null,(0,r.toDisplayString)(l[1]),1)],8,["onClick"])])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"countOk",onClick:p=>a(l)},[(0,r.createElementVNode)("u-text",null,(0,r.toDisplayString)(l),1)],8,["onClick"]))]))),128))])],64))}},ur=E(lr,[["styles",[cr]]]);Date.prototype.Format=function(t="yyyy-MM-dd hh:mm:ss"){let e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length===1?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};Date.prototype.FormatDateTime=function(){return this.Format("yyyy-MM-dd hh:mm:ss")};Date.prototype.FormatDate=function(){return this.Format("yyyy-MM-dd")};Date.prototype.FormatTime=function(){return this.Format("hh:mm:ss")};Date.prototype.Short=function(){let t=this.getTime(),e=1e3*60,n=e*60,s=n*24,o=s*7,i=s*30,c=new Date().getTime()-t;if(c<0)return;let u=parseInt(c/e),l=parseInt(c/n),g=parseInt(c/s),p=parseInt(c/o),v=parseInt(c/i),y;if(v>=1&&v<=3)y=" "+v+"\u6708\u524D";else if(p>=1&&p<=3)y=" "+p+"\u5468\u524D";else if(g>=1&&g<=6)y=" "+g+"\u5929\u524D";else if(l>=1&&l<=23)y=" "+l+"\u5C0F\u65F6\u524D";else if(u>=1&&u<=59)y=" "+u+"\u5206\u949F\u524D";else if(c>=0&&c<=e)y="\u521A\u521A";else{let _=new Date;_.setTime(t);let h=_.getFullYear(),d=_.getMonth()+1<10?"0"+(_.getMonth()+1):_.getMonth()+1,f=_.getDate()<10?"0"+_.getDate():_.getDate();y=h+"-"+d+"-"+f}return y};Date.prototype.MonthFirstDay=function(t=null,e="yyyy-MM-dd"){let n=new Date;t&&(n=new Date(t));var s=n.getFullYear(),o=n.getMonth()+1;o==0&&(o=12,s=s-1),o<10&&(o="0"+o);let i=s+"-"+o+"-01 00:00:00";return new Date(i).Format(e)};Date.prototype.MonthLastDay=function(t=null,e="yyyy-MM-dd"){let n=new Date;t&&(n=new Date(t));var s=n.getFullYear(),o=n.getMonth()+1;o==0&&(o=12,s=s-1),o<10&&(o="0"+o);var i=new Date(s,o,0);let a=s+"-"+o+"-"+i.getDate()+" 23:59:59";return new Date(a).Format(e)};var dr={modal:{"":{display:"flex",flexDirection:"column"}},popupHeader:{"":{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}},popupTabs:{".popupHeader ":{width:100}},popupContent:{"":{flexGrow:1}},content:{".popupContent ":{paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10,marginBottom:10,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",height:50,color:"#ffffff"}},contentLeft:{".popupContent ":{flexGrow:1,flexDirection:"row",alignItems:"center"}},contentIcon:{".popupContent ":{marginRight:10}},popupGridItem:{".popupContent ":{width:100,height:100,alignItems:"center",justifyContent:"center"}},calssifyTitle:{".popupContent ":{fontSize:12}},popupFooter:{"":{backgroundColor:"#e5e5e5"}},footerTop:{".popupFooter ":{paddingTop:0,paddingRight:20,paddingBottom:0,paddingLeft:20,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",height:38}},editIcon:{".popupFooter .footerTop ":{borderWidth:0,borderStyle:"solid",borderColor:"#000000"}}},hr={__name:"FormModal",props:["visible","detail","dataSource"],emits:["onOk","onCancel","onGetClassifyList"],setup(t,{emit:e}){let n=e,s=t;At.database();let o=(0,r.ref)(null),i=(0,r.ref)(null),a=(0,r.ref)(L({classify:s.detail.classify?s.detail.classify:s.dataSource&&s.dataSource.length>0?s.dataSource[0][0]:{},price:0,billType:"expense",create_date:new Date().getTime()},s.detail)),c=(0,r.computed)(()=>a.value.billType==="income"?0:1),u=(0,r.computed)(()=>new Date(a.value.create_date).FormatDate()),l=m=>{a.value.billType=m.currentIndex===0?"income":"expense",n("onGetClassifyList",{billType:a.value.billType})},g=m=>{a.value.classify=m},p=m=>{a.value.price=m},v=()=>{o.value.open()},y=m=>{a.value.title=m},_=m=>{let{detail:{value:b}}=m;a.value.create_date=new Date(b).getTime()},h=()=>{i.value.open()},d=m=>{a.value.desc=m},f=m=>{a.value.price=m,a.value.title||(a.value.title=a.classify.name||""),n("onOk",a.value)},w=()=>{n("onCancel")};return(m,b)=>{let k=N((0,r.resolveDynamicComponent)("uni-segmented-control"),Yi),I=N((0,r.resolveDynamicComponent)("uni-grid-item"),Zi),O=N((0,r.resolveDynamicComponent)("uni-grid"),or),D=(0,r.resolveComponent)("swiper-item"),R=(0,r.resolveComponent)("swiper"),H=(0,r.resolveComponent)("picker"),F=N((0,r.resolveDynamicComponent)("uni-popup-dialog"),Zn),G=N((0,r.resolveDynamicComponent)("uni-popup"),es);return(0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(ar),{class:"modal",visible:t.visible,onOnCancel:w},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"popupHeader"},[(0,r.createVNode)(k,{class:"popupTabs",styleType:"text",current:c.value,values:["\u6536\u5165","\u652F\u51FA"],onClickItem:l},null,8,["current"])]),(0,r.createVNode)(R,{class:"popupContent","indicator-dots":"true"},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"content",style:(0,r.normalizeStyle)({background:a.value.classify?a.value.classify.background:""})},[(0,r.createElementVNode)("view",{class:"contentLeft"},[(0,r.createVNode)(ge,{type:a.value.classify?a.value.classify.ico:"",color:"#fff",fontSize:"30",class:"contentIcon"},null,8,["type"]),(0,r.createElementVNode)("u-text",{onClick:v},(0,r.toDisplayString)(a.value.title||(a.value.classify?a.value.classify.name:"")),1)]),(0,r.createElementVNode)("u-text",{class:"contentRight"},"\uFFE5"+(0,r.toDisplayString)(a.value.price.toFixed(2)),1)],4),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(t.dataSource,(B,ee)=>((0,r.openBlock)(),(0,r.createBlock)(D,{index:ee,key:ee},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(O,{column:6,"show-border":!1},{default:(0,r.withCtx)(()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(B,(K,re)=>((0,r.openBlock)(),(0,r.createBlock)(I,{index:re,key:re},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"popupGridItem",onClick:me=>g(K)},[(0,r.createVNode)(ge,{type:K.ico,color:K.background,fontSize:"26"},null,8,["type","color"]),(0,r.createElementVNode)("u-text",{class:"calssifyTitle"},(0,r.toDisplayString)(K.name),1)],8,["onClick"])]),_:2},1032,["index"]))),128))]),_:2},1024)]),_:2},1032,["index"]))),128))]),_:1}),(0,r.createElementVNode)("view",{class:"popupFooter"},[(0,r.createElementVNode)("view",{class:"footerTop"},[(0,r.createVNode)(H,{mode:"date",value:u.value,onChange:_},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"uni-input"},[(0,r.createElementVNode)("u-text",null,(0,r.toDisplayString)(u.value),1)])]),_:1},8,["value"]),(0,r.createVNode)(ge,{type:"editor2",class:"editIcon",fontSize:"26",onClick:h})]),(0,r.createVNode)(ur,{price:a.value.price,onOnOk:f,onOnChange:p},null,8,["price"])]),(0,r.createVNode)(G,{ref_key:"titleRef",ref:o,type:"dialog"},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(F,{mode:"input",maxlength:6,title:a.value.classify?a.value.classify.name:"",modelValue:a.value.title,"onUpdate:modelValue":b[0]||(b[0]=B=>a.value.title=B),placeholder:a.value.classify?a.value.classify.name:"",onConfirm:y},null,8,["title","modelValue","placeholder"])]),_:1},512),(0,r.createVNode)(G,{ref_key:"descRef",ref:i,type:"dialog"},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(F,{mode:"input",maxlength:"255",title:"\u5907\u6CE8",modelValue:a.value.desc,"onUpdate:modelValue":b[1]||(b[1]=B=>a.value.desc=B),placeholder:"\u8BB0\u5F55\u7F8E\u597D\u751F\u6D3B",onConfirm:d},null,8,["modelValue"])]),_:1},512)]),_:1},8,["visible"])}}},fr=E(hr,[["styles",[dr]]]),pr=t=>{let e=t||new Date,n=e.getFullYear(),s=e.getMonth()+1;return new Date(`${n}-${s}-01 00:00:00`).getTime()},gr=t=>{let e=t||new Date,n=e.getFullYear(),s=e.getMonth()+2;s===13&&(n+=1,s="01");let o="01",i=new Date(`${n}-${s}-${o} 00:00:00`).getTime();return new Date(i-1).getTime()},mr={pages:{"":{height:100,backgroundColor:"#ffffff"}},content:{"":{flexGrow:1,flexShrink:1,overflow:"hidden","content:before":"''","position:before":"absolute","top:before":0,"left:before":0,"right:before":0,"marginTop:before":0,"marginBottom:before":0,"width:before":1,"height:before":100,"backgroundColor:before":"#999999"}}},yr={__name:"list",setup(t){let e=At.database(),n=e.command;(0,r.ref)(null);let s=(0,r.ref)(new Date),o=(0,r.ref)([]),i=(0,r.ref)([]),a=(0,r.ref)({}),c=(0,r.ref)({income:0,expense:0}),u=(0,r.ref)(!1);(0,r.onMounted)(()=>{g(),p({billType:"expense"})});let l=f=>{(!i.value[i.value.length-1]||i.value[i.value.length-1].length%24===0)&&i.value.push([]),i.value[i.value.length-1].push(L({},f))},g=()=>P(this,null,function*(){let f=pr(s.value),w=gr(s.value),m=e.collection("db-bills").where({create_date:n.gte(f).and(n.lte(w)),user_id:uni.getStorageSync("uni-id-pages-userInfo")._id}).getTemp(),{result:{data:b}}=yield e.collection(m,"db-bill-classifies").get();o.value=[],c.value={income:0,expense:0},b.sort((k,I)=>I.create_date-k.create_date).forEach(k=>{let{create_date:I,price:O}=k,D=o.value.length-1,R=D!==-1?new Date(o.value[D].date).toLocaleDateString():"",H=new Date(I).toLocaleDateString();(D===-1||R!==H)&&(o.value.push({date:new Date(I).toLocaleDateString(),price:0,children:[]}),D++),o.value[D].children.push(j(L({},k),{classify:k.classify_id[0]||{}})),o.value[D].price+=O,c.value[k.classify_id[0].billType]+=O})}),p=w=>P(this,[w],function*({billType:f}){let{result:{data:m}}=yield e.collection("db-bill-classifies").where({billType:f||"expense",user_id:n.eq(uni.getStorageSync("uni-id-pages-userInfo")._id).or(n.eq(null))}).get();i.value=[],m.forEach(b=>{l(L({},b))})}),v=f=>{let w=new Date(s.value),m=w.getFullYear(),b=w.getMonth()+1;b===1&&f===-1?(m-=1,b=12):b===12&&f===1?(m+=1,b=1):b+=f,s.value=new Date(`${m}-${b}-1`),g()},y=f=>{u.value=!0,uni.hideTabBar(),a.value=f||{}},_=()=>{uni.showTabBar(),u.value=!1,a.value={}},h=f=>{if(JSON.stringify(a.value)==="{}"){e.collection("db-bills").add({price:f.price,title:f.title,desc:f.desc,billType:f.billType,create_date:f.create_date,classify_id:f.classify._id}).then(()=>{_(),g()});return}e.collection("db-bills").doc(f._id).update({price:f.price,title:f.title,desc:f.desc,billType:f.billType,create_date:f.create_date,classify_id:f.classify._id}).then(()=>{_(),g()})},d=f=>{e.collection("db-bills").doc(f).remove().then(()=>{g()})};return(f,w)=>{let m=N((0,r.resolveDynamicComponent)("uni-fab"),li);return(0,r.openBlock)(),(0,r.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,r.createElementVNode)("view",{class:"pages"},[(0,r.createVNode)((0,r.unref)(gi)),(0,r.createVNode)(Hi,{date:s.value,onOnChange:v},null,8,["date"]),(0,r.createVNode)($i,{income:c.value.income,expense:c.value.expense},null,8,["income","expense"]),(0,r.createElementVNode)("scroll-view",{scrollY:"true",class:"content"},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.value,b=>((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(Bi),{data:b,key:b.date,onOnDelete:d,onOnEdit:y},null,8,["data"]))),128))]),(0,r.createVNode)(m,{onFabClick:y})]),u.value?((0,r.openBlock)(),(0,r.createBlock)(fr,{key:0,visible:u.value,detail:a.value,dataSource:i.value,onOnOk:h,onOnCancel:_,onOnGetClassifyList:p},null,8,["visible","detail","dataSource"])):(0,r.createCommentVNode)("",!0)])}}},Je=E(yr,[["styles",[mr]]]);var Pt=plus.webview.currentWebview();if(Pt){let t=parseInt(Pt.id),e="pages/list/list",n={};try{n=JSON.parse(Pt.__query__)}catch(o){}Je.mpType="page";let s=Vue.createPageApp(Je,{$store:getApp({allowDefault:!0}).$store,__pageId:t,__pagePath:e,__pageQuery:n});s.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...Je.styles||[]])),s.mount("#root")}})();
/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
